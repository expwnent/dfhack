<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DFHack Plugins &mdash; DFHack 0.40.24-r3 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.40.24-r3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/dfhack-icon.ico"/>
    <link rel="top" title="DFHack 0.40.24-r3 documentation" href="../README.html" />
    <link rel="next" title="DFHack Scripts" href="Scripts.html" />
    <link rel="prev" title="DFHack Core" href="Core.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dfhack-plugins">
<h1><a class="toc-backref" href="#id1">DFHack Plugins</a><a class="headerlink" href="#dfhack-plugins" title="Permalink to this headline">¶</a></h1>
<p>DFHack plugins are the commands, that are compiled with a specific version.
They can provide anything from a small keybinding, to a complete overhaul of
game subsystems or the entire renderer.</p>
<p>Most are listed here, hopefully organised in a way you will find useful.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dfhack-plugins" id="id1">DFHack Plugins</a><ul>
<li><a class="reference internal" href="#informative-plugins" id="id2">Informative Plugins</a><ul>
<li><a class="reference internal" href="#visualizer-and-data-export" id="id3">Visualizer and data export</a><ul>
<li><a class="reference internal" href="#stonesense" id="id4">stonesense</a></li>
<li><a class="reference internal" href="#mapexport" id="id5">mapexport</a></li>
<li><a class="reference internal" href="#dwarfexport" id="id6">dwarfexport</a></li>
<li><a class="reference internal" href="#blueprint" id="id7">blueprint</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-inspection" id="id8">Map inspection</a><ul>
<li><a class="reference internal" href="#cursecheck" id="id9">cursecheck</a></li>
<li><a class="reference internal" href="#flows" id="id10">flows</a></li>
<li><a class="reference internal" href="#probe" id="id11">probe</a></li>
<li><a class="reference internal" href="#prospect" id="id12">prospect</a></li>
<li><a class="reference internal" href="#reveal" id="id13">reveal</a></li>
<li><a class="reference internal" href="#showmood" id="id14">showmood</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#bugfixes" id="id15">Bugfixes</a><ul>
<li><a class="reference internal" href="#drybuckets" id="id16">drybuckets</a></li>
<li><a class="reference internal" href="#fixdiplomats" id="id17">fixdiplomats</a></li>
<li><a class="reference internal" href="#fixmerchants" id="id18">fixmerchants</a></li>
<li><a class="reference internal" href="#fix-unit-occupancy" id="id19">fix-unit-occupancy</a></li>
<li><a class="reference internal" href="#fixveins" id="id20">fixveins</a></li>
<li><a class="reference internal" href="#petcapremover" id="id21">petcapRemover</a></li>
<li><a class="reference internal" href="#tweak" id="id22">tweak</a></li>
<li><a class="reference internal" href="#fix-armory" id="id23">fix-armory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ui-upgrades" id="id24">UI Upgrades</a><ul>
<li><a class="reference internal" href="#manipulator" id="id25">manipulator</a></li>
<li><a class="reference internal" href="#search" id="id26">search</a></li>
<li><a class="reference internal" href="#game-interface" id="id27">Game interface</a><ul>
<li><a class="reference internal" href="#embark-tools" id="id28">embark-tools</a></li>
<li><a class="reference internal" href="#automaterial" id="id29">automaterial</a></li>
<li><a class="reference internal" href="#buildingplan" id="id30">buildingplan</a></li>
<li><a class="reference internal" href="#confirm" id="id31">confirm</a></li>
<li><a class="reference internal" href="#follow" id="id32">follow</a></li>
<li><a class="reference internal" href="#mousequery" id="id33">mousequery</a></li>
<li><a class="reference internal" href="#resume" id="id34">resume</a></li>
<li><a class="reference internal" href="#tidlers" id="id35">tidlers</a></li>
<li><a class="reference internal" href="#trackstop" id="id36">trackstop</a></li>
<li><a class="reference internal" href="#twaterlvl" id="id37">twaterlvl</a></li>
<li><a class="reference internal" href="#stockpile-management" id="id38">stockpile management</a></li>
<li><a class="reference internal" href="#rename" id="id39">rename</a></li>
<li><a class="reference internal" href="#rendermax" id="id40">rendermax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#designations" id="id41">Designations</a><ul>
<li><a class="reference internal" href="#burrow" id="id42">burrow</a></li>
<li><a class="reference internal" href="#dig" id="id43">dig</a></li>
<li><a class="reference internal" href="#digflood" id="id44">digFlood</a></li>
<li><a class="reference internal" href="#filltraffic" id="id45">filltraffic</a></li>
<li><a class="reference internal" href="#alltraffic" id="id46">alltraffic</a></li>
<li><a class="reference internal" href="#restrictliquid" id="id47">restrictliquid</a></li>
<li><a class="reference internal" href="#restrictice" id="id48">restrictice</a></li>
<li><a class="reference internal" href="#getplants" id="id49">getplants</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#job-and-fortress-management" id="id50">Job and Fortress management</a><ul>
<li><a class="reference internal" href="#autolabor" id="id51">autolabor</a><ul>
<li><a class="reference internal" href="#autohauler" id="id52">autohauler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#job-management" id="id53">Job management</a><ul>
<li><a class="reference internal" href="#job" id="id54">job</a></li>
<li><a class="reference internal" href="#job-material" id="id55">job-material</a></li>
<li><a class="reference internal" href="#job-duplicate" id="id56">job-duplicate</a></li>
<li><a class="reference internal" href="#stockflow" id="id57">stockflow</a></li>
<li><a class="reference internal" href="#workflow" id="id58">workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cleanup-and-garbage-disposal" id="id59">Cleanup and garbage disposal</a><ul>
<li><a class="reference internal" href="#clean" id="id60">clean</a></li>
<li><a class="reference internal" href="#spotclean" id="id61">spotclean</a></li>
<li><a class="reference internal" href="#autodump" id="id62">autodump</a></li>
<li><a class="reference internal" href="#cleanowned" id="id63">cleanowned</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fortress-activity-management" id="id64">Fortress activity management</a><ul>
<li><a class="reference internal" href="#dwarfmonitor" id="id65">dwarfmonitor</a></li>
<li><a class="reference internal" href="#worknow" id="id66">workNow</a></li>
<li><a class="reference internal" href="#seedwatch" id="id67">seedwatch</a></li>
<li><a class="reference internal" href="#zone" id="id68">zone</a></li>
<li><a class="reference internal" href="#autonestbox" id="id69">autonestbox</a></li>
<li><a class="reference internal" href="#autobutcher" id="id70">autobutcher</a></li>
<li><a class="reference internal" href="#autochop" id="id71">autochop</a></li>
<li><a class="reference internal" href="#treefarm" id="id72">treefarm</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#adventure-mode" id="id73">Adventure mode</a><ul>
<li><a class="reference internal" href="#adv-bodyswap" id="id74">adv-bodyswap</a></li>
<li><a class="reference internal" href="#advtools" id="id75">advtools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-modification" id="id76">Map modification</a><ul>
<li><a class="reference internal" href="#dveins" id="id77">3dveins</a></li>
<li><a class="reference internal" href="#changelayer" id="id78">changelayer</a></li>
<li><a class="reference internal" href="#changevein" id="id79">changevein</a></li>
<li><a class="reference internal" href="#changeitem" id="id80">changeitem</a></li>
<li><a class="reference internal" href="#cleanconst" id="id81">cleanconst</a></li>
<li><a class="reference internal" href="#colonies" id="id82">colonies</a></li>
<li><a class="reference internal" href="#deramp" id="id83">deramp</a></li>
<li><a class="reference internal" href="#feature" id="id84">feature</a></li>
<li><a class="reference internal" href="#fortplan" id="id85">fortplan</a></li>
<li><a class="reference internal" href="#infinitesky" id="id86">infiniteSky</a></li>
<li><a class="reference internal" href="#liquids" id="id87">liquids</a><ul>
<li><a class="reference internal" href="#commands" id="id88">Commands</a></li>
<li><a class="reference internal" href="#liquids-here" id="id89">liquids-here</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tiletypes" id="id90">tiletypes</a><ul>
<li><a class="reference internal" href="#tiletypes-command" id="id91">tiletypes-command</a></li>
<li><a class="reference internal" href="#tiletypes-here" id="id92">tiletypes-here</a></li>
<li><a class="reference internal" href="#tiletypes-here-point" id="id93">tiletypes-here-point</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tubefill" id="id94">tubefill</a></li>
<li><a class="reference internal" href="#plant" id="id95">plant</a></li>
<li><a class="reference internal" href="#regrass" id="id96">regrass</a></li>
<li><a class="reference internal" href="#weather" id="id97">weather</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mods-and-cheating" id="id98">Mods and Cheating</a><ul>
<li><a class="reference internal" href="#catsplosion" id="id99">catsplosion</a></li>
<li><a class="reference internal" href="#createitem" id="id100">createitem</a></li>
<li><a class="reference internal" href="#fastdwarf" id="id101">fastdwarf</a></li>
<li><a class="reference internal" href="#forceequip" id="id102">forceequip</a></li>
<li><a class="reference internal" href="#lair" id="id103">lair</a></li>
<li><a class="reference internal" href="#misery" id="id104">misery</a></li>
<li><a class="reference internal" href="#mode" id="id105">mode</a></li>
<li><a class="reference internal" href="#strangemood" id="id106">strangemood</a></li>
<li><a class="reference internal" href="#behavior-mods" id="id107">Behavior Mods</a><ul>
<li><a class="reference internal" href="#siege-engine" id="id108">Siege Engine</a></li>
<li><a class="reference internal" href="#power-meter" id="id109">Power Meter</a></li>
<li><a class="reference internal" href="#steam-engine" id="id110">Steam Engine</a></li>
<li><a class="reference internal" href="#add-spatter" id="id111">add-spatter</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="informative-plugins">
<h2><a class="toc-backref" href="#id2">Informative Plugins</a><a class="headerlink" href="#informative-plugins" title="Permalink to this headline">¶</a></h2>
<div class="section" id="visualizer-and-data-export">
<h3><a class="toc-backref" href="#id3">Visualizer and data export</a><a class="headerlink" href="#visualizer-and-data-export" title="Permalink to this headline">¶</a></h3>
<div class="section" id="stonesense">
<span id="plugins-stonesense"></span><h4><a class="toc-backref" href="#id4">stonesense</a><a class="headerlink" href="#stonesense" title="Permalink to this headline">¶</a></h4>
<p>An isometric visualizer that runs in a second window. This requires working
graphics acceleration and at least a dual core CPU (otherwise it will slow
down DF).  Invoked with <code class="docutils literal"><span class="pre">stonesense</span></code>, or alias <code class="docutils literal"><span class="pre">ssense</span></code>.</p>
<p>For detailed information, see the <a class="reference external" href="https://github.com/DFHack/stonesense/blob/master/README.md">stonesense readme</a>, the <a class="reference external" href="http://dwarffortresswiki.org/index.php/Utility:Stonesense">wiki page</a>,
or the <a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=43260">Bay12 forum thread</a>.</p>
<p>Stonesense works on Windows XP SP3 or later, and most modern Linux distributions.
Each stonesense version is built for a particular version of DFHack, so
releases are now done through DFHack.</p>
</div>
<div class="section" id="mapexport">
<h4><a class="toc-backref" href="#id5">mapexport</a><a class="headerlink" href="#mapexport" title="Permalink to this headline">¶</a></h4>
<p>Export the current loaded map as a file. This was used by visualizers for
DF 0.34.11, but is now basically obsolete.</p>
</div>
<div class="section" id="dwarfexport">
<h4><a class="toc-backref" href="#id6">dwarfexport</a><a class="headerlink" href="#dwarfexport" title="Permalink to this headline">¶</a></h4>
<p>Export dwarves to RuneSmith-compatible XML; also unused by modern tools.</p>
</div>
<div class="section" id="blueprint">
<h4><a class="toc-backref" href="#id7">blueprint</a><a class="headerlink" href="#blueprint" title="Permalink to this headline">¶</a></h4>
<p>Exports a portion of your fortress into QuickFort style blueprint files.:</p>
<div class="highlight-python"><div class="highlight"><pre>blueprint &lt;x&gt; &lt;y&gt; &lt;z&gt; &lt;name&gt; [dig] [build] [place] [query]
</pre></div>
</div>
<p>Options (If only region and name are given, export all):</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x,y,z:</th><td class="field-body">Size of map area to export</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body">Name of export files</td>
</tr>
<tr class="field-odd field"><th class="field-name">dig:</th><td class="field-body">Export dig commands to &#8220;&lt;name&gt;-dig.csv&#8221;</td>
</tr>
<tr class="field-even field"><th class="field-name">build:</th><td class="field-body">Export build commands to &#8220;&lt;name&gt;-build.csv&#8221;</td>
</tr>
<tr class="field-odd field"><th class="field-name">place:</th><td class="field-body">Export stockpile commands to &#8220;&lt;name&gt;-place.csv&#8221;</td>
</tr>
<tr class="field-even field"><th class="field-name">query:</th><td class="field-body">Export query commands to &#8220;&lt;name&gt;-query.csv&#8221;</td>
</tr>
</tbody>
</table>
<p>Goes very well with <a class="reference internal" href="#plugins-fortplan"><span>fortplan</span></a>, for re-importing.</p>
</div>
</div>
<div class="section" id="map-inspection">
<h3><a class="toc-backref" href="#id8">Map inspection</a><a class="headerlink" href="#map-inspection" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cursecheck">
<h4><a class="toc-backref" href="#id9">cursecheck</a><a class="headerlink" href="#cursecheck" title="Permalink to this headline">¶</a></h4>
<p>Checks a single map tile or the whole map/world for cursed creatures (ghosts,
vampires, necromancers, werebeasts, zombies).</p>
<p>With an active in-game cursor only the selected tile will be observed.
Without a cursor the whole map will be checked.</p>
<p>By default cursed creatures will be only counted in case you just want to find
out if you have any of them running around in your fort. Dead and passive
creatures (ghosts who were put to rest, killed vampires, ...) are ignored.
Undead skeletons, corpses, bodyparts and the like are all thrown into the curse
category &#8220;zombie&#8221;. Anonymous zombies and resurrected body parts will show
as &#8220;unnamed creature&#8221;.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">detail:</th><td class="field-body">Print full name, date of birth, date of curse and some status
info (some vampires might use fake identities in-game, though).</td>
</tr>
<tr class="field-even field"><th class="field-name">nick:</th><td class="field-body">Set the type of curse as nickname (does not always show up
in-game, some vamps don&#8217;t like nicknames).</td>
</tr>
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">Include dead and passive cursed creatures (can result in a quite
long list after having FUN with necromancers).</td>
</tr>
<tr class="field-even field"><th class="field-name">verbose:</th><td class="field-body">Print all curse tags (if you really want to know it all).</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">cursecheck</span> <span class="pre">detail</span> <span class="pre">all</span></code></dt>
<dd>Give detailed info about all cursed creatures including deceased ones (no
in-game cursor).</dd>
<dt><code class="docutils literal"><span class="pre">cursecheck</span> <span class="pre">nick</span></code></dt>
<dd>Give a nickname all living/active cursed creatures on the map(no in-game
cursor).</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you do a full search (with the option &#8220;all&#8221;) former ghosts will show up
with the cursetype &#8220;unknown&#8221; because their ghostly flag is not set
anymore. But if you happen to find a living/active creature with cursetype
&#8220;unknown&#8221; please report that in the dfhack thread on the modding forum or
per irc. This is likely to happen with mods which introduce new types
of curses, for example.</p>
</div>
</div>
<div class="section" id="flows">
<h4><a class="toc-backref" href="#id10">flows</a><a class="headerlink" href="#flows" title="Permalink to this headline">¶</a></h4>
<p>A tool for checking how many tiles contain flowing liquids. If you suspect that
your magma sea leaks into HFS, you can use this tool to be sure without
revealing the map.</p>
</div>
<div class="section" id="probe">
<h4><a class="toc-backref" href="#id11">probe</a><a class="headerlink" href="#probe" title="Permalink to this headline">¶</a></h4>
<p>Can be used to determine tile properties like temperature.</p>
</div>
<div class="section" id="prospect">
<span id="plugins-prospect"></span><h4><a class="toc-backref" href="#id12">prospect</a><a class="headerlink" href="#prospect" title="Permalink to this headline">¶</a></h4>
<p>Prints a big list of all the present minerals and plants. By default, only
the visible part of the map is scanned.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">Scan the whole map, as if it was revealed.</td>
</tr>
<tr class="field-even field"><th class="field-name">value:</th><td class="field-body">Show material value in the output. Most useful for gems.</td>
</tr>
<tr class="field-odd field"><th class="field-name">hell:</th><td class="field-body">Show the Z range of HFS tubes. Implies &#8216;all&#8217;.</td>
</tr>
</tbody>
</table>
<p>If prospect is called during the embark selection screen, it displays an estimate of
layer stone availability.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The results of pre-embark prospect are an <em>estimate</em>, and can at best be expected
to be somewhere within +/- 30% of the true amount; sometimes it does a lot worse.
Especially, it is not clear how to precisely compute how many soil layers there
will be in a given embark tile, so it can report a whole extra layer, or omit one
that is actually present.</p>
</div>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">Also estimate vein mineral amounts.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reveal">
<span id="plugins-reveal"></span><h4><a class="toc-backref" href="#id13">reveal</a><a class="headerlink" href="#reveal" title="Permalink to this headline">¶</a></h4>
<p>This reveals the map. By default, HFS will remain hidden so that the demons
don&#8217;t spawn. You can use <code class="docutils literal"><span class="pre">reveal</span> <span class="pre">hell</span></code> to reveal everything. With hell revealed,
you won&#8217;t be able to unpause until you hide the map again. If you really want
to unpause with hell revealed, use <code class="docutils literal"><span class="pre">reveal</span> <span class="pre">demons</span></code>.</p>
<p>Reveal also works in adventure mode, but any of its effects are negated once
you move. When you use it this way, you don&#8217;t need to run <code class="docutils literal"><span class="pre">unreveal</span></code>.</p>
<div class="section" id="unreveal">
<h5>unreveal<a class="headerlink" href="#unreveal" title="Permalink to this headline">¶</a></h5>
<p>Reverts the effects of <code class="docutils literal"><span class="pre">reveal</span></code>.</p>
</div>
<div class="section" id="revtoggle">
<h5>revtoggle<a class="headerlink" href="#revtoggle" title="Permalink to this headline">¶</a></h5>
<p>Switches between <code class="docutils literal"><span class="pre">reveal</span></code> and <code class="docutils literal"><span class="pre">unreveal</span></code>.</p>
</div>
<div class="section" id="revflood">
<h5>revflood<a class="headerlink" href="#revflood" title="Permalink to this headline">¶</a></h5>
<p>This command will hide the whole map and then reveal all the tiles that have
a path to the in-game cursor.</p>
</div>
<div class="section" id="revforget">
<h5>revforget<a class="headerlink" href="#revforget" title="Permalink to this headline">¶</a></h5>
<p>When you use reveal, it saves information about what was/wasn&#8217;t visible before
revealing everything. Unreveal uses this information to hide things again.
This command throws away the information. For example, use in cases where
you abandoned with the fort revealed and no longer want the data.</p>
</div>
</div>
<div class="section" id="showmood">
<h4><a class="toc-backref" href="#id14">showmood</a><a class="headerlink" href="#showmood" title="Permalink to this headline">¶</a></h4>
<p>Shows all items needed for the currently active strange mood.</p>
</div>
</div>
</div>
<div class="section" id="bugfixes">
<h2><a class="toc-backref" href="#id15">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="drybuckets">
<h3><a class="toc-backref" href="#id16">drybuckets</a><a class="headerlink" href="#drybuckets" title="Permalink to this headline">¶</a></h3>
<p>This utility removes water from all buckets in your fortress, allowing them to be safely used for making lye.</p>
</div>
<div class="section" id="fixdiplomats">
<h3><a class="toc-backref" href="#id17">fixdiplomats</a><a class="headerlink" href="#fixdiplomats" title="Permalink to this headline">¶</a></h3>
<p>Up to version 0.31.12, Elves only sent Diplomats to your fortress to propose
tree cutting quotas due to a bug; once that bug was fixed, Elves stopped caring
about excess tree cutting. This command adds a Diplomat position to all Elven
civilizations, allowing them to negotiate tree cutting quotas - and you to
violate them and start wars.</p>
</div>
<div class="section" id="fixmerchants">
<h3><a class="toc-backref" href="#id18">fixmerchants</a><a class="headerlink" href="#fixmerchants" title="Permalink to this headline">¶</a></h3>
<p>This command adds the Guild Representative position to all Human civilizations,
allowing them to make trade agreements (just as they did back in 0.28.181.40d
and earlier) in case you haven&#8217;t already modified your raws accordingly.</p>
</div>
<div class="section" id="fix-unit-occupancy">
<h3><a class="toc-backref" href="#id19">fix-unit-occupancy</a><a class="headerlink" href="#fix-unit-occupancy" title="Permalink to this headline">¶</a></h3>
<p>This plugin fixes issues with unit occupancy, notably issues with phantom
&#8220;unit blocking tile&#8221; messages (<a class="reference external" href="http://bay12games.com/dwarves/mantisbt/view.php?id=3499">Bug 3499</a>). It can be run manually, or
periodically when enabled with the built-in enable/disable commands:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">(no argument):</th><td class="field-body">Run the plugin once immediately, for the whole map.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">-h, here, cursor:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Run immediately, only operate on the tile at the cursor</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">-n, dry, dry-run:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Run immediately, do not write changes to map</td>
</tr>
<tr class="field-even field"><th class="field-name">interval &lt;X&gt;:</th><td class="field-body">Run the plugin every <code class="docutils literal"><span class="pre">X</span></code> ticks (when enabled).
The default is 1200 ticks, or 1 day.
Ticks are only counted when the game is unpaused.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fixveins">
<h3><a class="toc-backref" href="#id20">fixveins</a><a class="headerlink" href="#fixveins" title="Permalink to this headline">¶</a></h3>
<p>Removes invalid references to mineral inclusions and restores missing ones.
Use this if you broke your embark with tools like tiletypes, or if you
accidentally placed a construction on top of a valuable mineral floor.</p>
</div>
<div class="section" id="petcapremover">
<h3><a class="toc-backref" href="#id21">petcapRemover</a><a class="headerlink" href="#petcapremover" title="Permalink to this headline">¶</a></h3>
<p>This plugin allows you to remove or raise the pet population cap. In vanilla
DF, pets will not reproduce unless the population is below 50 and the number of
children of that species is below a certain percentage. This plugin allows
removing the second restriction and removing or raising the first. Pets still
require PET or PET_EXOTIC tags in order to reproduce. Type help petcapRemover
for exact usage. In order to make population more stable and avoid sudden
population booms as you go below the raised population cap, this plugin counts
pregnancies toward the new population cap. It can still go over, but only in the
case of multiple births.</p>
<p>Usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">petcapRemover:</th><td class="field-body">cause pregnancies now and schedule the next check</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">petcapRemover every n:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">set how often in ticks the plugin checks for possible pregnancies</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">petcapRemover cap n:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">set the new cap to n. if n = 0, no cap</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">petcapRemover pregtime n:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">sets the pregnancy duration to n ticks. natural pregnancies are
300000 ticks for the current race and 200000 for everyone else</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tweak">
<span id="plugins-tweak"></span><h3><a class="toc-backref" href="#id22">tweak</a><a class="headerlink" href="#tweak" title="Permalink to this headline">¶</a></h3>
<p>Contains various tweaks for minor bugs.</p>
<p>One-shot subcommands:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">clear-missing:</th><td class="field-body">Remove the missing status from the selected unit.
This allows engraving slabs for ghostly, but not yet
found, creatures.</td>
</tr>
<tr class="field-even field"><th class="field-name">clear-ghostly:</th><td class="field-body">Remove the ghostly status from the selected unit and mark
it as dead. This allows getting rid of bugged ghosts
which do not show up in the engraving slab menu at all,
even after using clear-missing. It works, but is
potentially very dangerous - so use with care. Probably
(almost certainly) it does not have the same effects like
a proper burial. You&#8217;ve been warned.</td>
</tr>
<tr class="field-odd field"><th class="field-name">fixmigrant:</th><td class="field-body">Remove the resident/merchant flag from the selected unit.
Intended to fix bugged migrants/traders who stay at the
map edge and don&#8217;t enter your fort. Only works for
dwarves (or generally the player&#8217;s race in modded games).
Do NOT abuse this for &#8216;real&#8217; caravan merchants (if you
really want to kidnap them, use &#8216;tweak makeown&#8217; instead,
otherwise they will have their clothes set to forbidden etc).</td>
</tr>
<tr class="field-even field"><th class="field-name">makeown:</th><td class="field-body">Force selected unit to become a member of your fort.
Can be abused to grab caravan merchants and escorts, even if
they don&#8217;t belong to the player&#8217;s race. Foreign sentients
(humans, elves) can be put to work, but you can&#8217;t assign rooms
to them and they don&#8217;t show up in DwarfTherapist because the
game treats them like pets. Grabbing draft animals from
a caravan can result in weirdness (animals go insane or berserk
and are not flagged as tame), but you are allowed to mark them
for slaughter. Grabbing wagons results in some funny spam, then
they are scuttled.</td>
</tr>
</tbody>
</table>
<p>Subcommands that persist until disabled or DF quits:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">adamantine-cloth-wear:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Prevents adamantine clothing from wearing out while being worn (bug 6481).</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">advmode-contained:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Works around bug 6202, i.e. custom reactions with container inputs
in advmode. The issue is that the screen tries to force you to select
the contents separately from the container. This forcefully skips child
reagents.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">civ-view-agreement:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Fixes overlapping text on the &#8220;view agreement&#8221; screen</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">craft-age-wear:</th><td class="field-body"><p class="first">Fixes the behavior of crafted items wearing out over time (bug 6003).
With this tweak, items made from cloth and leather will gain a level of
wear  every 20 years.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">embark-profile-name:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Allows the use of lowercase letters when saving embark profiles</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">eggs-fertile:</th><td class="field-body"><p class="first">Displays a fertility indicator on nestboxes</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">farm-plot-select:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Adds &#8220;Select all&#8221; and &#8220;Deselect all&#8221; options to farm plot menus</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fast-heat:</th><td class="field-body"><p class="first">Further improves temperature update performance by ensuring that 1 degree
of item temperature is crossed in no more than specified number of frames
when updating from the environment temperature. This reduces the time it
takes for stable-temp to stop updates again when equilibrium is disturbed.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fast-trade:</th><td class="field-body"><p class="first">Makes Shift-Down in the Move Goods to Depot and Trade screens select
the current item (fully, in case of a stack), and scroll down one line.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fps-min:</th><td class="field-body"><p class="first">Fixes the in-game minimum FPS setting</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">import-priority-category:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Allows changing the priority of all goods in a
category when discussing an import agreement with the liaison</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kitchen-keys:</th><td class="field-body"><p class="first">Fixes DF kitchen meal keybindings (bug 614)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">kitchen-prefs-color:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Changes color of enabled items to green in kitchen preferences</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">kitchen-prefs-empty:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Fixes a layout issue with empty kitchen tabs (bug 9000)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">manager-quantity:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Removes the limit of 30 jobs per manager order</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">max-wheelbarrow:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Allows assigning more than 3 wheelbarrows to a stockpile</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">military-color-assigned:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Color squad candidates already assigned to other squads in yellow/green
to make them stand out more in the list.</p>
<img alt="../_images/tweak-mil-color.png" src="../_images/tweak-mil-color.png" />
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">military-stable-assign:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Preserve list order and cursor position when assigning to squad,
i.e. stop the rightmost list of the Positions page of the military
screen from constantly resetting to the top.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">nestbox-color:</th><td class="field-body"><p class="first">Fixes the color of built nestboxes</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">shift-8-scroll:</th><td class="field-body"><p class="first">Gives Shift-8 (or <code class="docutils literal"><span class="pre">*</span></code>) priority when scrolling menus, instead of scrolling the map</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">stable-cursor:</th><td class="field-body"><p class="first">Saves the exact cursor position between t/q/k/d/b/etc menus of fortress mode.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">tradereq-pet-gender:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">Displays pet genders on the trade request screen</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fix-armory">
<span id="plugins-fix-armory"></span><h3><a class="toc-backref" href="#id23">fix-armory</a><a class="headerlink" href="#fix-armory" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="Binpatches.html#binpatches-needs-patch"><span>This plugin requires a binpatch</span></a>, which has not
been available since DF 0.34.11</p>
</div>
</div>
<div class="section" id="ui-upgrades">
<h2><a class="toc-backref" href="#id24">UI Upgrades</a><a class="headerlink" href="#ui-upgrades" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In order to avoid user confusion, as a matter of policy all these tools
display the word &#8220;DFHack&#8221; on the screen somewhere while active.</p>
<p class="last">When that is not appropriate because they merely add keybinding hints to
existing DF screens, they deliberately use red instead of green for the key.</p>
</div>
<div class="section" id="manipulator">
<h3><a class="toc-backref" href="#id25">manipulator</a><a class="headerlink" href="#manipulator" title="Permalink to this headline">¶</a></h3>
<p>An in-game equivalent to the popular program Dwarf Therapist.</p>
<p>To activate, open the unit screen and press <code class="docutils literal"><span class="pre">l</span></code>.</p>
<img alt="../_images/manipulator.png" src="../_images/manipulator.png" />
<p>The far left column displays the unit&#8217;s Happiness (color-coded based on its
value), Name, Profession/Squad, and the right half of the screen displays each
dwarf&#8217;s labor settings and skill levels (0-9 for Dabbling through Professional,
A-E for Great through Grand Master, and U-Z for Legendary through Legendary+5).</p>
<p>Cells with teal backgrounds denote skills not controlled by labors, e.g.
military and social skills.</p>
<img alt="../_images/manipulator2.png" src="../_images/manipulator2.png" />
<p>Press <code class="docutils literal"><span class="pre">t</span></code> to toggle between Profession and Squad view.</p>
<img alt="../_images/manipulator3.png" src="../_images/manipulator3.png" />
<p>Use the arrow keys or number pad to move the cursor around, holding Shift to
move 10 tiles at a time.</p>
<p>Press the Z-Up (<code class="docutils literal"><span class="pre">&lt;</span></code>) and Z-Down (<code class="docutils literal"><span class="pre">&gt;</span></code>) keys to move quickly between labor/skill
categories. The numpad Z-Up and Z-Down keys seek to the first or last unit
in the list. Backspace seeks to the top left corner.</p>
<p>Press Enter to toggle the selected labor for the selected unit, or Shift+Enter
to toggle all labors within the selected category.</p>
<p>Press the <code class="docutils literal"><span class="pre">+-</span></code> keys to sort the unit list according to the currently selected
skill/labor, and press the <code class="docutils literal"><span class="pre">*/</span></code> keys to sort the unit list by Name, Profession/Squad,
Happiness, or Arrival order (using Tab to select which sort method to use here).</p>
<p>With a unit selected, you can press the <code class="docutils literal"><span class="pre">v</span></code> key to view its properties (and
possibly set a custom nickname or profession) or the <code class="docutils literal"><span class="pre">c</span></code> key to exit
Manipulator and zoom to its position within your fortress.</p>
<p>The following mouse shortcuts are also available:</p>
<ul class="simple">
<li>Click on a column header to sort the unit list. Left-click to sort it in one
direction (descending for happiness or labors/skills, ascending for name,
profession or squad) and right-click to sort it in the opposite direction.</li>
<li>Left-click on a labor cell to toggle that labor. Right-click to move the
cursor onto that cell instead of toggling it.</li>
<li>Left-click on a unit&#8217;s name, profession or squad to view its properties.</li>
<li>Right-click on a unit&#8217;s name, profession or squad to zoom to it.</li>
</ul>
<p>Pressing <code class="docutils literal"><span class="pre">ESC</span></code> normally returns to the unit screen, but <code class="docutils literal"><span class="pre">Shift-ESC</span></code> would exit
directly to the main dwarf mode screen.</p>
</div>
<div class="section" id="search">
<h3><a class="toc-backref" href="#id26">search</a><a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h3>
<p>The search plugin adds search to the Stocks, Animals, Trading, Stockpile,
Noble (assignment candidates), Military (position candidates), Burrows
(unit list), Rooms, Announcements, Job List and Unit List screens.</p>
<img alt="../_images/search.png" src="../_images/search.png" />
<p>Searching works the same way as the search option in &#8220;Move to Depot&#8221; does.
You will see the Search option displayed on screen with a hotkey (usually <code class="docutils literal"><span class="pre">s</span></code>).
Pressing it lets you start typing a query and the relevant list will start
filtering automatically.</p>
<p>Pressing ENTER, ESC or the arrow keys will return you to browsing the now
filtered list, which still functions as normal. You can clear the filter
by either going back into search mode and backspacing to delete it, or
pressing the &#8220;shifted&#8221; version of the search hotkey while browsing the
list (e.g. if the hotkey is <code class="docutils literal"><span class="pre">s</span></code>, then hitting <code class="docutils literal"><span class="pre">Shift-s</span></code> will clear any
filter).</p>
<p>Leaving any screen automatically clears the filter.</p>
<p>In the Trade screen, the actual trade will always only act on items that
are actually visible in the list; the same effect applies to the Trade
Value numbers displayed by the screen. Because of this, the <code class="docutils literal"><span class="pre">t</span></code> key is
blocked while search is active, so you have to reset the filters first.
Pressing <code class="docutils literal"><span class="pre">Alt-C</span></code> will clear both search strings.</p>
<p>In the stockpile screen the option only appears if the cursor is in the
rightmost list:</p>
<img alt="../_images/search-stockpile.png" src="../_images/search-stockpile.png" />
<p>Note that the &#8216;Permit XXX&#8217;/&#8217;Forbid XXX&#8217; keys conveniently operate only
on items actually shown in the rightmost list, so it is possible to select
only fat or tallow by forbidding fats, then searching for fat/tallow, and
using Permit Fats again while the list is filtered.</p>
</div>
<div class="section" id="game-interface">
<h3><a class="toc-backref" href="#id27">Game interface</a><a class="headerlink" href="#game-interface" title="Permalink to this headline">¶</a></h3>
<div class="section" id="embark-tools">
<h4><a class="toc-backref" href="#id28">embark-tools</a><a class="headerlink" href="#embark-tools" title="Permalink to this headline">¶</a></h4>
<p>A collection of embark-related tools.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>embark-tools enable/disable tool [tool]...
</pre></div>
</div>
<p>Tools:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">anywhere:</th><td class="field-body">Allows embarking anywhere (including sites, mountain-only biomes,
and oceans). Use with caution.</td>
</tr>
<tr class="field-even field"><th class="field-name">mouse:</th><td class="field-body">Implements mouse controls (currently in the local embark region only)</td>
</tr>
<tr class="field-odd field"><th class="field-name">sand:</th><td class="field-body">Displays an indicator when sand is present in the currently-selected
area, similar to the default clay/stone indicators.</td>
</tr>
<tr class="field-even field"><th class="field-name">sticky:</th><td class="field-body">Maintains the selected local area while navigating the world map</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="automaterial">
<h4><a class="toc-backref" href="#id29">automaterial</a><a class="headerlink" href="#automaterial" title="Permalink to this headline">¶</a></h4>
<p>This makes building constructions (walls, floors, fortifications, etc) a little bit
easier by saving you from having to trawl through long lists of materials each time
you place one.</p>
<p>Firstly, it moves the last used material for a given construction type to the top of
the list, if there are any left. So if you build a wall with chalk blocks, the next
time you place a wall the chalk blocks will be at the top of the list, regardless of
distance (it only does this in &#8220;grouped&#8221; mode, as individual item lists could be huge).
This should mean you can place most constructions without having to search for your
preferred material type.</p>
<img alt="../_images/automaterial-mat.png" src="../_images/automaterial-mat.png" />
<p>Pressing <code class="docutils literal"><span class="pre">a</span></code> while highlighting any material will enable that material for &#8220;auto select&#8221;
for this construction type. You can enable multiple materials as autoselect. Now the next
time you place this type of construction, the plugin will automatically choose materials
for you from the kinds you enabled. If there is enough to satisfy the whole placement,
you won&#8217;t be prompted with the material screen - the construction will be placed and you
will be back in the construction menu as if you did it manually.</p>
<p>When choosing the construction placement, you will see a couple of options:</p>
<img alt="../_images/automaterial-pos.png" src="../_images/automaterial-pos.png" />
<p>Use <code class="docutils literal"><span class="pre">a</span></code> here to temporarily disable the material autoselection, e.g. if you need
to go to the material selection screen so you can toggle some materials on or off.</p>
<p>The other option (auto type selection, off by default) can be toggled on with <code class="docutils literal"><span class="pre">t</span></code>. If you
toggle this option on, instead of returning you to the main construction menu after selecting
materials, it returns you back to this screen. If you use this along with several autoselect
enabled materials, you should be able to place complex constructions more conveniently.</p>
</div>
<div class="section" id="buildingplan">
<h4><a class="toc-backref" href="#id30">buildingplan</a><a class="headerlink" href="#buildingplan" title="Permalink to this headline">¶</a></h4>
<p>When active (via <code class="docutils literal"><span class="pre">enable</span> <span class="pre">buildingplan</span></code>), this plugin adds a planning mode for
furniture placement.  You can then place furniture and other buildings before
the required materials are available, and the job will be unsuspended when
the item is created.</p>
<p>Very useful when combined with <a class="reference internal" href="#plugins-workflow"><span>workflow</span></a> - you can set a constraint
to always have one or two doors/beds/tables/chairs/etc available, and place
as many as you like.  The plugins then take over and fulfill the orders,
with minimal space dedicated to stockpiles.</p>
</div>
<div class="section" id="confirm">
<h4><a class="toc-backref" href="#id31">confirm</a><a class="headerlink" href="#confirm" title="Permalink to this headline">¶</a></h4>
<p>Implements several confirmation dialogs for potentially destructive actions
(for example, seizing goods from traders or deleting hauling routes).</p>
<p>Usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">enable confirm, confirm enable all:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Enable all confirmations (replace with <code class="docutils literal"><span class="pre">disable</span></code> to disable)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">confirm enable option1 [option2...]:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Enable (or disable) specific confirmations. Run <code class="docutils literal"><span class="pre">confirm</span> <span class="pre">help</span></code>
for a complete list of options.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="follow">
<h4><a class="toc-backref" href="#id32">follow</a><a class="headerlink" href="#follow" title="Permalink to this headline">¶</a></h4>
<p>Makes the game view follow the currently highlighted unit after you exit from the
current menu or cursor mode. Handy for watching dwarves running around. Deactivated
by moving the view manually.</p>
</div>
<div class="section" id="mousequery">
<h4><a class="toc-backref" href="#id33">mousequery</a><a class="headerlink" href="#mousequery" title="Permalink to this headline">¶</a></h4>
<p>Adds mouse controls to the DF interface, eg click-and-drag designations.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">plugin:</th><td class="field-body">enable/disable the entire plugin</td>
</tr>
<tr class="field-even field"><th class="field-name">rbutton:</th><td class="field-body">enable/disable right mouse button</td>
</tr>
<tr class="field-odd field"><th class="field-name">track:</th><td class="field-body">enable/disable moving cursor in build and designation mode</td>
</tr>
<tr class="field-even field"><th class="field-name">edge:</th><td class="field-body">enable/disable active edge scrolling (when on, will also enable tracking)</td>
</tr>
<tr class="field-odd field"><th class="field-name">live:</th><td class="field-body">enable/disable query view when unpaused</td>
</tr>
<tr class="field-even field"><th class="field-name">delay:</th><td class="field-body">Set delay when edge scrolling in tracking mode. Omit amount to display current setting.</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mousequery</span> <span class="p">[</span><span class="n">plugin</span><span class="p">]</span> <span class="p">[</span><span class="n">rbutton</span><span class="p">]</span> <span class="p">[</span><span class="n">track</span><span class="p">]</span> <span class="p">[</span><span class="n">edge</span><span class="p">]</span> <span class="p">[</span><span class="n">live</span><span class="p">]</span> <span class="p">[</span><span class="n">enable</span><span class="o">|</span><span class="n">disable</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="resume">
<span id="plugins-resume"></span><h4><a class="toc-backref" href="#id34">resume</a><a class="headerlink" href="#resume" title="Permalink to this headline">¶</a></h4>
<p>Allows automatic resumption of suspended constructions, along with colored
UI hints for construction status.</p>
</div>
<div class="section" id="tidlers">
<h4><a class="toc-backref" href="#id35">tidlers</a><a class="headerlink" href="#tidlers" title="Permalink to this headline">¶</a></h4>
<p>Toggle between all possible positions where the idlers count can be placed.</p>
</div>
<div class="section" id="trackstop">
<h4><a class="toc-backref" href="#id36">trackstop</a><a class="headerlink" href="#trackstop" title="Permalink to this headline">¶</a></h4>
<p>Adds a <code class="docutils literal"><span class="pre">q</span></code> menu for track stops, which is completely blank by default.
This allows you to view and/or change the track stop&#8217;s friction and dump
direction settings, using the keybindings from the track stop building interface.</p>
</div>
<div class="section" id="twaterlvl">
<h4><a class="toc-backref" href="#id37">twaterlvl</a><a class="headerlink" href="#twaterlvl" title="Permalink to this headline">¶</a></h4>
<p>Toggle between displaying/not displaying liquid depth as numbers.</p>
</div>
<div class="section" id="stockpile-management">
<h4><a class="toc-backref" href="#id38">stockpile management</a><a class="headerlink" href="#stockpile-management" title="Permalink to this headline">¶</a></h4>
<div class="section" id="import-export">
<span id="plugins-stocksettings"></span><h5>import/export<a class="headerlink" href="#import-export" title="Permalink to this headline">¶</a></h5>
<p>The following commands allow you to save and load stockpile settings.
See <a class="reference internal" href="Scripts.html#scripts-gui-stockpiles"><span>gui/stockpiles</span></a> for an in-game interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copystock:</th><td class="field-body">Copies the parameters of the currently highlighted stockpile to the custom
stockpile settings and switches to custom stockpile placement mode, effectively
allowing you to copy/paste stockpiles easily.</td>
</tr>
<tr class="field-even field"><th class="field-name">savestock:</th><td class="field-body">Saves the currently highlighted stockpile&#8217;s settings to a file in your Dwarf
Fortress folder. This file can be used to copy settings between game saves or
players.  eg:  <code class="docutils literal"><span class="pre">savestock</span> <span class="pre">food_settings.dfstock</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">loadstock:</th><td class="field-body">Loads a saved stockpile settings file and applies it to the currently selected
stockpile.  eg:  <code class="docutils literal"><span class="pre">loadstock</span> <span class="pre">food_settings.dfstock</span></code></td>
</tr>
</tbody>
</table>
<p>To use savestock and loadstock, use the <code class="docutils literal"><span class="pre">q</span></code> command to highlight a stockpile.
Then run savestock giving it a descriptive filename. Then, in a different (or
the same!) gameworld, you can highlight any stockpile with <code class="docutils literal"><span class="pre">q</span></code> then execute the
<code class="docutils literal"><span class="pre">loadstock</span></code> command passing it the name of that file. The settings will be
applied to that stockpile.</p>
<p>Note that files are relative to the DF folder, so put your files there or in a
subfolder for easy access. Filenames should not have spaces.  Generated materials,
divine metals, etc are not saved as they are different in every world.</p>
</div>
<div class="section" id="stockpile-automation">
<h5>Stockpile automation<a class="headerlink" href="#stockpile-automation" title="Permalink to this headline">¶</a></h5>
<p>Enable the autodump, automelt and autotrade plugins in your dfhack.init with:</p>
<div class="highlight-python"><div class="highlight"><pre>enable autodump automelt autotrade
</pre></div>
</div>
<p>When querying a stockpile, options will appear to toggle automation settings for this stockpile.</p>
<p>When automelt is enabled for a stockpile, any meltable items placed in it will be designated
to be melted.  When autotrade is enabled for a stockpile, any items placed in it will be
designated to be taken to the Trade Depot whenever merchants are on the map.
When autodump is enabled for a stockpile, any items placed in this stockpile will
automatically be designated to be dumped.</p>
</div>
</div>
<div class="section" id="rename">
<span id="plugins-rename"></span><h4><a class="toc-backref" href="#id39">rename</a><a class="headerlink" href="#rename" title="Permalink to this headline">¶</a></h4>
<p>Allows renaming various things.  Use <a class="reference internal" href="Scripts.html#scripts-gui-rename"><span>gui/rename</span></a> for an in-game interface.</p>
<p>Options:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">rename</span> <span class="pre">squad</span> <span class="pre">&lt;index&gt;</span> <span class="pre">&quot;name&quot;</span></code></dt>
<dd>Rename squad by index to &#8216;name&#8217;.</dd>
<dt><code class="docutils literal"><span class="pre">rename</span> <span class="pre">hotkey</span> <span class="pre">&lt;index&gt;</span> <span class="pre">\&quot;name\&quot;</span></code></dt>
<dd>Rename hotkey by index. This allows assigning
longer commands to the DF hotkeys.</dd>
<dt><code class="docutils literal"><span class="pre">rename</span> <span class="pre">unit</span> <span class="pre">&quot;nickname&quot;</span></code></dt>
<dd>Rename a unit/creature highlighted in the DF user interface.</dd>
<dt><code class="docutils literal"><span class="pre">rename</span> <span class="pre">unit-profession</span> <span class="pre">&quot;custom</span> <span class="pre">profession&quot;</span></code></dt>
<dd>Change proffession name of the highlighted unit/creature.</dd>
<dt><code class="docutils literal"><span class="pre">rename</span> <span class="pre">building</span> <span class="pre">&quot;name&quot;</span></code></dt>
<dd>Set a custom name for the selected building.
The building must be one of stockpile, workshop, furnace, trap,
siege engine or an activity zone.</dd>
</dl>
</div>
<div class="section" id="rendermax">
<h4><a class="toc-backref" href="#id40">rendermax</a><a class="headerlink" href="#rendermax" title="Permalink to this headline">¶</a></h4>
<p>A collection of renderer replacing/enhancing filters. For better effect try changing the
black color in palette to non totally black. For more info see
<a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=128487">the Bay12 Rendermax thread</a>.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">trippy:</th><td class="field-body">Randomizes the color of each tiles. Used for fun, or testing.</td>
</tr>
<tr class="field-even field"><th class="field-name">light:</th><td class="field-body">Enable lighting engine.</td>
</tr>
<tr class="field-odd field"><th class="field-name">light reload:</th><td class="field-body">Reload the settings file.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">light sun &lt;x&gt;|cycle:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Set time to &lt;x&gt; (in hours) or set it to df time cycle.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">occlusionON, occlusionOFF:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Show debug occlusion info.</td>
</tr>
<tr class="field-even field"><th class="field-name">disable:</th><td class="field-body">Disable any filter that is enabled.</td>
</tr>
</tbody>
</table>
<p>An image showing lava and dragon breath. Not pictured here: sunlight, shining items/plants,
materials that color the light etc...</p>
<img alt="../_images/rendermax.png" src="../_images/rendermax.png" />
</div>
</div>
<div class="section" id="designations">
<h3><a class="toc-backref" href="#id41">Designations</a><a class="headerlink" href="#designations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="burrow">
<h4><a class="toc-backref" href="#id42">burrow</a><a class="headerlink" href="#burrow" title="Permalink to this headline">¶</a></h4>
<p>Miscellaneous burrow control. Allows manipulating burrows and automated burrow
expansion while digging.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">enable feature ...:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Enable features of the plugin.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">disable feature ...:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Disable features of the plugin.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">clear-unit burrow burrow ...:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Remove all units from the burrows.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">clear-tiles burrow burrow ...:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Remove all tiles from the burrows.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set-units target-burrow src-burrow ...:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Clear target, and adds units from source burrows.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">add-units target-burrow src-burrow ...:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Add units from the source burrows to the target.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">remove-units target-burrow src-burrow ...:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Remove units in source burrows from the target.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set-tiles target-burrow src-burrow ...:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Clear target and adds tiles from the source burrows.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">add-tiles target-burrow src-burrow ...:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Add tiles from the source burrows to the target.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">remove-tiles target-burrow src-burrow ...:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Remove tiles in source burrows from the target.</p>
<p class="last">For these three options, in place of a source burrow it is
possible to use one of the following keywords: ABOVE_GROUND,
SUBTERRANEAN, INSIDE, OUTSIDE, LIGHT, DARK, HIDDEN, REVEALED</p>
</td>
</tr>
</tbody>
</table>
<p>Features:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">auto-grow:</th><td class="field-body">When a wall inside a burrow with a name ending in &#8216;+&#8217; is dug
out, the burrow is extended to newly-revealed adjacent walls.
This final &#8216;+&#8217; may be omitted in burrow name args of commands above.
Digging 1-wide corridors with the miner inside the burrow is SLOW.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dig">
<h4><a class="toc-backref" href="#id43">dig</a><a class="headerlink" href="#dig" title="Permalink to this headline">¶</a></h4>
<p>This plugin makes many automated or complicated dig patterns easy.</p>
<div class="section" id="digv">
<h5>digv<a class="headerlink" href="#digv" title="Permalink to this headline">¶</a></h5>
<p>Designates a whole vein for digging. Requires an active in-game cursor placed
over a vein tile. With the &#8216;x&#8217; option, it will traverse z-levels (putting stairs
between the same-material tiles).</p>
</div>
<div class="section" id="digvx">
<h5>digvx<a class="headerlink" href="#digvx" title="Permalink to this headline">¶</a></h5>
<p>A permanent alias for &#8216;digv x&#8217;.</p>
</div>
<div class="section" id="digl">
<h5>digl<a class="headerlink" href="#digl" title="Permalink to this headline">¶</a></h5>
<p>Designates layer stone for digging. Requires an active in-game cursor placed
over a layer stone tile. With the &#8216;x&#8217; option, it will traverse z-levels
(putting stairs between the same-material tiles). With the &#8216;undo&#8217; option it
will remove the dig designation instead (if you realize that digging out a 50
z-level deep layer was not such a good idea after all).</p>
</div>
<div class="section" id="diglx">
<h5>diglx<a class="headerlink" href="#diglx" title="Permalink to this headline">¶</a></h5>
<p>A permanent alias for &#8216;digl x&#8217;.</p>
</div>
<div class="section" id="digexp">
<h5>digexp<a class="headerlink" href="#digexp" title="Permalink to this headline">¶</a></h5>
<p>This command is for <a class="reference external" href="http://dwarffortresswiki.org/index.php/cv:Exploratory_mining">exploratory mining</a>.</p>
<p>There are two variables that can be set: pattern and filter.</p>
<p>Patterns:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">diag5:</th><td class="field-body">diagonals separated by 5 tiles</td>
</tr>
<tr class="field-even field"><th class="field-name">diag5r:</th><td class="field-body">diag5 rotated 90 degrees</td>
</tr>
<tr class="field-odd field"><th class="field-name">ladder:</th><td class="field-body">A &#8216;ladder&#8217; pattern</td>
</tr>
<tr class="field-even field"><th class="field-name">ladderr:</th><td class="field-body">ladder rotated 90 degrees</td>
</tr>
<tr class="field-odd field"><th class="field-name">clear:</th><td class="field-body">Just remove all dig designations</td>
</tr>
<tr class="field-even field"><th class="field-name">cross:</th><td class="field-body">A cross, exactly in the middle of the map.</td>
</tr>
</tbody>
</table>
<p>Filters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">designate whole z-level</td>
</tr>
<tr class="field-even field"><th class="field-name">hidden:</th><td class="field-body">designate only hidden tiles of z-level (default)</td>
</tr>
<tr class="field-odd field"><th class="field-name">designated:</th><td class="field-body">Take current designation and apply pattern to it.</td>
</tr>
</tbody>
</table>
<p>After you have a pattern set, you can use &#8216;expdig&#8217; to apply it again.</p>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">expdig</span> <span class="pre">diag5</span> <span class="pre">hidden</span></code></dt>
<dd>Designate the diagonal 5 patter over all hidden tiles</dd>
<dt><code class="docutils literal"><span class="pre">expdig</span></code></dt>
<dd>Apply last used pattern and filter</dd>
<dt><code class="docutils literal"><span class="pre">expdig</span> <span class="pre">ladder</span> <span class="pre">designated</span></code></dt>
<dd>Take current designations and replace them with the ladder pattern</dd>
</dl>
</div>
<div class="section" id="digcircle">
<h5>digcircle<a class="headerlink" href="#digcircle" title="Permalink to this headline">¶</a></h5>
<p>A command for easy designation of filled and hollow circles.
It has several types of options.</p>
<p>Shape:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hollow:</th><td class="field-body">Set the circle to hollow (default)</td>
</tr>
<tr class="field-even field"><th class="field-name">filled:</th><td class="field-body">Set the circle to filled</td>
</tr>
<tr class="field-odd field"><th class="field-name">#:</th><td class="field-body">Diameter in tiles (default = 0, does nothing)</td>
</tr>
</tbody>
</table>
<p>Action:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">set:</th><td class="field-body">Set designation (default)</td>
</tr>
<tr class="field-even field"><th class="field-name">unset:</th><td class="field-body">Unset current designation</td>
</tr>
<tr class="field-odd field"><th class="field-name">invert:</th><td class="field-body">Invert designations already present</td>
</tr>
</tbody>
</table>
<p>Designation types:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dig:</th><td class="field-body">Normal digging designation (default)</td>
</tr>
<tr class="field-even field"><th class="field-name">ramp:</th><td class="field-body">Ramp digging</td>
</tr>
<tr class="field-odd field"><th class="field-name">ustair:</th><td class="field-body">Staircase up</td>
</tr>
<tr class="field-even field"><th class="field-name">dstair:</th><td class="field-body">Staircase down</td>
</tr>
<tr class="field-odd field"><th class="field-name">xstair:</th><td class="field-body">Staircase up/down</td>
</tr>
<tr class="field-even field"><th class="field-name">chan:</th><td class="field-body">Dig channel</td>
</tr>
</tbody>
</table>
<p>After you have set the options, the command called with no options
repeats with the last selected parameters.</p>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">digcircle</span> <span class="pre">filled</span> <span class="pre">3</span></code></dt>
<dd>Dig a filled circle with diameter = 3.</dd>
<dt><code class="docutils literal"><span class="pre">digcircle</span></code></dt>
<dd>Do it again.</dd>
</dl>
</div>
<div class="section" id="digtype">
<h5>digtype<a class="headerlink" href="#digtype" title="Permalink to this headline">¶</a></h5>
<p>For every tile on the map of the same vein type as the selected tile, this command designates it to have the same designation as the selected tile. If the selected tile has no designation, they will be dig designated.
If an argument is given, the designation of the selected tile is ignored, and all appropriate tiles are set to the specified designation.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dig:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">channel:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">ramp:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">updown:</th><td class="field-body">up/down stairs</td>
</tr>
<tr class="field-odd field"><th class="field-name">up:</th><td class="field-body">up stairs</td>
</tr>
<tr class="field-even field"><th class="field-name">down:</th><td class="field-body">down stairs</td>
</tr>
<tr class="field-odd field"><th class="field-name">clear:</th><td class="field-body">clear designation</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="digflood">
<h4><a class="toc-backref" href="#id44">digFlood</a><a class="headerlink" href="#digflood" title="Permalink to this headline">¶</a></h4>
<p>Automatically digs out specified veins as they are discovered. It runs once
every time a dwarf finishes a dig job. It will only dig out appropriate tiles
that are adjacent to the finished dig job. To add a vein type, use <code class="docutils literal"><span class="pre">digFlood</span> <span class="pre">1</span> <span class="pre">[type]</span></code>.
This will also enable the plugin. To remove a vein type, use <code class="docutils literal"><span class="pre">digFlood</span> <span class="pre">0</span> <span class="pre">[type]</span> <span class="pre">1</span></code>
to disable, then remove, then re-enable.</p>
<p>Usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">help digflood:</th><td class="field-body">detailed help message</td>
</tr>
<tr class="field-even field"><th class="field-name">digFlood 0:</th><td class="field-body">disable the plugin</td>
</tr>
<tr class="field-odd field"><th class="field-name">digFlood 1:</th><td class="field-body">enable the plugin</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">digFlood 0 MICROCLINE COAL_BITUMINOUS 1:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">disable plugin, remove microcline and bituminous coal from monitoring, then re-enable the plugin</td>
</tr>
<tr class="field-odd field"><th class="field-name">digFlood CLEAR:</th><td class="field-body">remove all inorganics from monitoring</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">digFlood digAll1:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">ignore the monitor list and dig any vein</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">digFlood digAll0:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">disable digAll mode</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="filltraffic">
<h4><a class="toc-backref" href="#id45">filltraffic</a><a class="headerlink" href="#filltraffic" title="Permalink to this headline">¶</a></h4>
<p>Set traffic designations using flood-fill starting at the cursor.</p>
<p>Traffic Type Codes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">H:</th><td class="field-body">High Traffic</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body">Normal Traffic</td>
</tr>
<tr class="field-odd field"><th class="field-name">L:</th><td class="field-body">Low Traffic</td>
</tr>
<tr class="field-even field"><th class="field-name">R:</th><td class="field-body">Restricted Traffic</td>
</tr>
</tbody>
</table>
<p>Other Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">X:</th><td class="field-body">Fill accross z-levels.</td>
</tr>
<tr class="field-even field"><th class="field-name">B:</th><td class="field-body">Include buildings and stockpiles.</td>
</tr>
<tr class="field-odd field"><th class="field-name">P:</th><td class="field-body">Include empty space.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">filltraffic</span> <span class="pre">H</span></code></dt>
<dd>When used in a room with doors, it will set traffic to HIGH in just that room.</dd>
</dl>
</div>
<div class="section" id="alltraffic">
<h4><a class="toc-backref" href="#id46">alltraffic</a><a class="headerlink" href="#alltraffic" title="Permalink to this headline">¶</a></h4>
<p>Set traffic designations for every single tile of the map (useful for resetting traffic designations).</p>
<p>Traffic Type Codes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">H:</th><td class="field-body">High Traffic</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body">Normal Traffic</td>
</tr>
<tr class="field-odd field"><th class="field-name">L:</th><td class="field-body">Low Traffic</td>
</tr>
<tr class="field-even field"><th class="field-name">R:</th><td class="field-body">Restricted Traffic</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">alltraffic</span> <span class="pre">N</span></code></dt>
<dd>Set traffic to &#8216;normal&#8217; for all tiles.</dd>
</dl>
</div>
<div class="section" id="restrictliquid">
<h4><a class="toc-backref" href="#id47">restrictliquid</a><a class="headerlink" href="#restrictliquid" title="Permalink to this headline">¶</a></h4>
<p>Restrict traffic on all visible tiles with liquid.</p>
</div>
<div class="section" id="restrictice">
<h4><a class="toc-backref" href="#id48">restrictice</a><a class="headerlink" href="#restrictice" title="Permalink to this headline">¶</a></h4>
<p>Restrict traffic on all tiles on top of visible ice.</p>
</div>
<div class="section" id="getplants">
<h4><a class="toc-backref" href="#id49">getplants</a><a class="headerlink" href="#getplants" title="Permalink to this headline">¶</a></h4>
<p>This tool allows plant gathering and tree cutting by RAW ID. Specify the types
of trees to cut down and/or shrubs to gather by their plant names, separated
by spaces.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">-t:</th><td class="field-body">Select trees only (exclude shrubs)</td>
</tr>
<tr class="field-even field"><th class="field-name">-s:</th><td class="field-body">Select shrubs only (exclude trees)</td>
</tr>
<tr class="field-odd field"><th class="field-name">-c:</th><td class="field-body">Clear designations instead of setting them</td>
</tr>
<tr class="field-even field"><th class="field-name">-x:</th><td class="field-body">Apply selected action to all plants except those specified (invert
selection)</td>
</tr>
<tr class="field-odd field"><th class="field-name">-a:</th><td class="field-body">Select every type of plant (obeys <code class="docutils literal"><span class="pre">-t</span></code>/<code class="docutils literal"><span class="pre">-s</span></code>)</td>
</tr>
</tbody>
</table>
<p>Specifying both <code class="docutils literal"><span class="pre">-t</span></code> and <code class="docutils literal"><span class="pre">-s</span></code> will have no effect. If no plant IDs are specified,
all valid plant IDs will be listed.</p>
</div>
</div>
</div>
<div class="section" id="job-and-fortress-management">
<h2><a class="toc-backref" href="#id50">Job and Fortress management</a><a class="headerlink" href="#job-and-fortress-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="autolabor">
<span id="plugins-autolabor"></span><h3><a class="toc-backref" href="#id51">autolabor</a><a class="headerlink" href="#autolabor" title="Permalink to this headline">¶</a></h3>
<p>Automatically manage dwarf labors to efficiently complete jobs.
Autolabor tries to keep as many dwarves as possible busy but
also tries to have dwarves specialize in specific skills.</p>
<p>The key is that, for almost all labors, once a dwarf begins a job it will finish that
job even if the associated labor is removed. Autolabor therefore frequently checks
which dwarf or dwarves should take new jobs for that labor, and sets labors accordingly.
Labors with equiptment (mining, hunting, and woodcutting), which are abandoned
if labors change mid-job, are handled slightly differently to minimise churn.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><em>autolabor will override any manual changes you make to labors while
it is enabled, including through other tools such as Dwarf Therapist</em></p>
</div>
<p>Simple usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">enable autolabor:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Enables the plugin with default settings.  (Persistent per fortress)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">disable autolabor:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Disables the plugin.</td>
</tr>
</tbody>
</table>
<p>Anything beyond this is optional - autolabor works well on the default settings.</p>
<p>By default, each labor is assigned to between 1 and 200 dwarves (2-200 for mining).
By default 33% of the workforce become haulers, who handle all hauling jobs as well
as cleaning, pulling levers, recovering wounded, removing constructions, and filling ponds.
Other jobs are automatically assigned as described above.  Each of these settings can be adjusted.</p>
<p>Jobs are rarely assigned to nobles with responsibilities for meeting diplomats or merchants,
never to the chief medical dwarf, and less often to the bookeeper and manager.</p>
<p>Hunting is never assigned without a butchery, and fishing is never assigned without a fishery.</p>
<p>For each labor a preference order is calculated based on skill, biased against masters of other
trades and excluding those who can&#8217;t do the job.  The labor is then added to the best &lt;minimum&gt;
dwarves for that labor.  We assign at least the minimum number of dwarfs, in order of preference,
and then assign additional dwarfs that meet any of these conditions:</p>
<ul class="simple">
<li>The dwarf is idle and there are no idle dwarves assigned to this labor</li>
<li>The dwarf has non-zero skill associated with the labor</li>
<li>The labor is mining, hunting, or woodcutting and the dwarf currently has it enabled.</li>
</ul>
<p>We stop assigning dwarfs when we reach the maximum allowed.</p>
<p>Advanced usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">autolabor &lt;labor&gt; &lt;minimum&gt; [&lt;maximum&gt;]:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Set number of dwarves assigned to a labor.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">autolabor &lt;labor&gt; haulers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Set a labor to be handled by hauler dwarves.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">autolabor &lt;labor&gt; disable:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Turn off autolabor for a specific labor.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">autolabor &lt;labor&gt; reset:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Return a labor to the default handling.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">autolabor reset-all:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Return all labors to the default handling.</td>
</tr>
<tr class="field-even field"><th class="field-name">autolabor list:</th><td class="field-body">List current status of all labors.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">autolabor status:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Show basic status information.</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="Scripts.html#scripts-autolabor-artisans"><span>autolabor-artisans</span></a> for a differently-tunde setup.</p>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">autolabor</span> <span class="pre">MINE</span></code></dt>
<dd>Keep at least 5 dwarves with mining enabled.</dd>
<dt><code class="docutils literal"><span class="pre">autolabor</span> <span class="pre">CUT_GEM</span> <span class="pre">1</span> <span class="pre">1</span></code></dt>
<dd>Keep exactly 1 dwarf with gemcutting enabled.</dd>
<dt><code class="docutils literal"><span class="pre">autolabor</span> <span class="pre">COOK</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">3</span></code></dt>
<dd>Keep 1 dwarf with cooking enabled, selected only from the top 3.</dd>
<dt><code class="docutils literal"><span class="pre">autolabor</span> <span class="pre">FEED_WATER_CIVILIANS</span> <span class="pre">haulers</span></code></dt>
<dd>Have haulers feed and water wounded dwarves.</dd>
<dt><code class="docutils literal"><span class="pre">autolabor</span> <span class="pre">CUTWOOD</span> <span class="pre">disable</span></code></dt>
<dd>Turn off autolabor for wood cutting.</dd>
</dl>
<div class="section" id="autohauler">
<h4><a class="toc-backref" href="#id52">autohauler</a><a class="headerlink" href="#autohauler" title="Permalink to this headline">¶</a></h4>
<p>Rather than the all-of-the-above means of autolabor, autohauler will instead
only manage hauling labors and leave skilled labors entirely to the user, who
will probably use Dwarf Therapist to do so.</p>
<p>Idle dwarves will be assigned the hauling labors; everyone else (including
those currently hauling) will have the hauling labors removed. This is to
encourage every dwarf to do their assigned skilled labors whenever possible,
but resort to hauling when those jobs are not available. This also implies
that the user will have a very tight skill assignment, with most skilled
labors only being assigned to just one dwarf, no dwarf having more than two
active skilled labors, and almost every non-military dwarf having at least
one skilled labor assigned.</p>
<p>Autohauler allows skills to be flagged as to prevent hauling labors from
being assigned when the skill is present. By default this is the unused
ALCHEMIST labor but can be changed by the user.</p>
</div>
</div>
<div class="section" id="job-management">
<h3><a class="toc-backref" href="#id53">Job management</a><a class="headerlink" href="#job-management" title="Permalink to this headline">¶</a></h3>
<div class="section" id="job">
<span id="plugins-job"></span><h4><a class="toc-backref" href="#id54">job</a><a class="headerlink" href="#job" title="Permalink to this headline">¶</a></h4>
<p>Command for general job query and manipulation.</p>
<p>Options:</p>
<dl class="docutils">
<dt><em>no extra options</em></dt>
<dd>Print details of the current job. The job can be selected
in a workshop, or the unit/jobs screen.</dd>
<dt><strong>list</strong></dt>
<dd>Print details of all jobs in the selected workshop.</dd>
<dt><strong>item-material &lt;item-idx&gt; &lt;material[:subtoken]&gt;</strong></dt>
<dd>Replace the exact material id in the job item.</dd>
<dt><strong>item-type &lt;item-idx&gt; &lt;type[:subtype]&gt;</strong></dt>
<dd>Replace the exact item type id in the job item.</dd>
</dl>
</div>
<div class="section" id="job-material">
<h4><a class="toc-backref" href="#id55">job-material</a><a class="headerlink" href="#job-material" title="Permalink to this headline">¶</a></h4>
<p>Alter the material of the selected job.</p>
<p>Invoked as:</p>
<div class="highlight-python"><div class="highlight"><pre>job-material &lt;inorganic-token&gt;
</pre></div>
</div>
<p>Intended to be used as a keybinding:</p>
<ul class="simple">
<li>In &#8216;q&#8217; mode, when a job is highlighted within a workshop or furnace,
changes the material of the job. Only inorganic materials can be used
in this mode.</li>
<li>In &#8216;b&#8217; mode, during selection of building components positions the cursor
over the first available choice with the matching material.</li>
</ul>
</div>
<div class="section" id="job-duplicate">
<h4><a class="toc-backref" href="#id56">job-duplicate</a><a class="headerlink" href="#job-duplicate" title="Permalink to this headline">¶</a></h4>
<p>Duplicate the selected job in a workshop:</p>
<ul class="simple">
<li>In &#8216;q&#8217; mode, when a job is highlighted within a workshop or furnace building,
instantly duplicates the job.</li>
</ul>
</div>
<div class="section" id="stockflow">
<h4><a class="toc-backref" href="#id57">stockflow</a><a class="headerlink" href="#stockflow" title="Permalink to this headline">¶</a></h4>
<p>Allows the fortress bookkeeper to queue jobs through the manager,
based on space or items available in stockpiles.</p>
<p>Usage:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">stockflow</span> <span class="pre">enable</span></code></dt>
<dd>Enable the plugin.</dd>
<dt><code class="docutils literal"><span class="pre">stockflow</span> <span class="pre">disable</span></code></dt>
<dd>Disable the plugin.</dd>
<dt><code class="docutils literal"><span class="pre">stockflow</span> <span class="pre">fast</span></code></dt>
<dd>Enable the plugin in fast mode.</dd>
<dt><code class="docutils literal"><span class="pre">stockflow</span> <span class="pre">list</span></code></dt>
<dd>List any work order settings for your stockpiles.</dd>
<dt><code class="docutils literal"><span class="pre">stockflow</span> <span class="pre">status</span></code></dt>
<dd>Display whether the plugin is enabled.</dd>
</dl>
<p>While enabled, the <code class="docutils literal"><span class="pre">q</span></code> menu of each stockpile will have two new options:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">j</span></code>:  Select a job to order, from an interface like the manager&#8217;s screen.</li>
<li><code class="docutils literal"><span class="pre">J</span></code>:  Cycle between several options for how many such jobs to order.</li>
</ul>
<p>Whenever the bookkeeper updates stockpile records, new work orders will
be placed on the manager&#8217;s queue for each such selection, reduced by the
number of identical orders already in the queue.</p>
<p>In fast mode, new work orders will be enqueued once per day, instead of
waiting for the bookkeeper.</p>
</div>
<div class="section" id="workflow">
<span id="plugins-workflow"></span><h4><a class="toc-backref" href="#id58">workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h4>
<p>Manage control of repeat jobs.</p>
<p>Check out <a class="reference internal" href="Scripts.html#scripts-gui-workflow"><span>gui/workflow</span></a> for a simple front-end integrated
in the game UI.</p>
<p>Usage:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">enable</span> <span class="pre">[option...],</span> <span class="pre">workflow</span> <span class="pre">disable</span> <span class="pre">[option...]</span></code></dt>
<dd><p class="first">If no options are specified, enables or disables the plugin.
Otherwise, enables or disables any of the following options:</p>
<ul class="last simple">
<li>drybuckets: Automatically empty abandoned water buckets.</li>
<li>auto-melt: Resume melt jobs when there are objects to melt.</li>
</ul>
</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">jobs</span></code></dt>
<dd>List workflow-controlled jobs (if in a workshop, filtered by it).</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">list</span></code></dt>
<dd>List active constraints, and their job counts.</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">list-commands</span></code></dt>
<dd>List active constraints as workflow commands that re-create them;
this list can be copied to a file, and then reloaded using the
<code class="docutils literal"><span class="pre">script</span></code> built-in command.</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">count</span> <span class="pre">&lt;constraint-spec&gt;</span> <span class="pre">&lt;cnt-limit&gt;</span> <span class="pre">[cnt-gap]</span></code></dt>
<dd>Set a constraint, counting every stack as 1 item.</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">amount</span> <span class="pre">&lt;constraint-spec&gt;</span> <span class="pre">&lt;cnt-limit&gt;</span> <span class="pre">[cnt-gap]</span></code></dt>
<dd>Set a constraint, counting all items within stacks.</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">unlimit</span> <span class="pre">&lt;constraint-spec&gt;</span></code></dt>
<dd>Delete a constraint.</dd>
<dt><code class="docutils literal"><span class="pre">workflow</span> <span class="pre">unlimit-all</span></code></dt>
<dd>Delete all constraints.</dd>
</dl>
<div class="section" id="function">
<h5>Function<a class="headerlink" href="#function" title="Permalink to this headline">¶</a></h5>
<p>When the plugin is enabled, it protects all repeat jobs from removal.
If they do disappear due to any cause, they are immediately re-added to their
workshop and suspended.</p>
<p>In addition, when any constraints on item amounts are set, repeat jobs that
produce that kind of item are automatically suspended and resumed as the item
amount goes above or below the limit. The gap specifies how much below the limit
the amount has to drop before jobs are resumed; this is intended to reduce
the frequency of jobs being toggled.</p>
</div>
<div class="section" id="constraint-format">
<h5>Constraint format<a class="headerlink" href="#constraint-format" title="Permalink to this headline">¶</a></h5>
<p>The constraint spec consists of 4 parts, separated with <code class="docutils literal"><span class="pre">/</span></code> characters:</p>
<div class="highlight-python"><div class="highlight"><pre>ITEM[:SUBTYPE]/[GENERIC_MAT,...]/[SPECIFIC_MAT:...]/[LOCAL,&lt;quality&gt;]
</pre></div>
</div>
<p>The first part is mandatory and specifies the item type and subtype,
using the raw tokens for items, in the same syntax you would e.g. use
for a custom reaction input. For more information, see
<a class="reference external" href="http://dwarffortresswiki.org/index.php/Material_token">this page.</a></p>
<p>The subsequent parts are optional:</p>
<ul>
<li><p class="first">A generic material spec constrains the item material to one of
the hard-coded generic classes, which currently include:</p>
<div class="highlight-python"><div class="highlight"><pre>PLANT WOOD CLOTH SILK LEATHER BONE SHELL SOAP TOOTH HORN PEARL YARN
METAL STONE SAND GLASS CLAY MILK
</pre></div>
</div>
</li>
<li><p class="first">A specific material spec chooses the material exactly, using the
raw syntax for reaction input materials, e.g. <code class="docutils literal"><span class="pre">INORGANIC:IRON</span></code>,
although for convenience it also allows just <code class="docutils literal"><span class="pre">IRON</span></code>, or <code class="docutils literal"><span class="pre">ACACIA:WOOD</span></code> etc.
See the link above for more details on the unabbreviated raw syntax.</p>
</li>
<li><p class="first">A comma-separated list of miscellaneous flags, which currently can
be used to ignore imported items or items below a certain quality.</p>
</li>
</ul>
</div>
<div class="section" id="constraint-examples">
<h5>Constraint examples<a class="headerlink" href="#constraint-examples" title="Permalink to this headline">¶</a></h5>
<p>Keep metal bolts within 900-1000, and wood/bone within 150-200:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow amount AMMO:ITEM_AMMO_BOLTS/METAL 1000 100
workflow amount AMMO:ITEM_AMMO_BOLTS/WOOD,BONE 200 50
</pre></div>
</div>
<p>Keep the number of prepared food &amp; drink stacks between 90 and 120:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow count FOOD 120 30
workflow count DRINK 120 30
</pre></div>
</div>
<p>Make sure there are always 25-30 empty bins/barrels/bags:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow count BIN 30
workflow count BARREL 30
workflow count BOX/CLOTH,SILK,YARN 30
</pre></div>
</div>
<p>Make sure there are always 15-20 coal and 25-30 copper bars:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow count BAR//COAL 20
workflow count BAR//COPPER 30
</pre></div>
</div>
<p>Produce 15-20 gold crafts:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow count CRAFTS//GOLD 20
</pre></div>
</div>
<p>Collect 15-20 sand bags and clay boulders:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow count POWDER_MISC/SAND 20
workflow count BOULDER/CLAY 20
</pre></div>
</div>
<p>Make sure there are always 80-100 units of dimple dye:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow amount POWDER_MISC//MUSHROOM_CUP_DIMPLE:MILL 100 20
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order for this to work, you have to set the material of the PLANT input
on the Mill Plants job to MUSHROOM_CUP_DIMPLE using the &#8216;job item-material&#8217;
command. Otherwise the plugin won&#8217;t be able to deduce the output material.</p>
</div>
<p>Maintain 10-100 locally-made crafts of exceptional quality:</p>
<div class="highlight-python"><div class="highlight"><pre>workflow count CRAFTS///LOCAL,EXCEPTIONAL 100 90
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cleanup-and-garbage-disposal">
<h3><a class="toc-backref" href="#id59">Cleanup and garbage disposal</a><a class="headerlink" href="#cleanup-and-garbage-disposal" title="Permalink to this headline">¶</a></h3>
<div class="section" id="clean">
<span id="plugins-clean"></span><h4><a class="toc-backref" href="#id60">clean</a><a class="headerlink" href="#clean" title="Permalink to this headline">¶</a></h4>
<p>Cleans all the splatter that get scattered all over the map, items and
creatures. In an old fortress, this can significantly reduce FPS lag. It can
also spoil your !!FUN!!, so think before you use it.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">map:</th><td class="field-body">Clean the map tiles. By default, it leaves mud and snow alone.</td>
</tr>
<tr class="field-even field"><th class="field-name">units:</th><td class="field-body">Clean the creatures. Will also clean hostiles.</td>
</tr>
<tr class="field-odd field"><th class="field-name">items:</th><td class="field-body">Clean all the items. Even a poisoned blade.</td>
</tr>
</tbody>
</table>
<p>Extra options for <code class="docutils literal"><span class="pre">map</span></code>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">mud:</th><td class="field-body">Remove mud in addition to the normal stuff.</td>
</tr>
<tr class="field-even field"><th class="field-name">snow:</th><td class="field-body">Also remove snow coverings.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="spotclean">
<h4><a class="toc-backref" href="#id61">spotclean</a><a class="headerlink" href="#spotclean" title="Permalink to this headline">¶</a></h4>
<p>Works like <code class="docutils literal"><span class="pre">clean</span> <span class="pre">map</span> <span class="pre">snow</span> <span class="pre">mud</span></code>, but only for the tile under the cursor. Ideal
if you want to keep that bloody entrance <code class="docutils literal"><span class="pre">clean</span> <span class="pre">map</span></code> would clean up.</p>
</div>
<div class="section" id="autodump">
<span id="plugins-autodump"></span><h4><a class="toc-backref" href="#id62">autodump</a><a class="headerlink" href="#autodump" title="Permalink to this headline">¶</a></h4>
<p>This utility lets you quickly move all items designated to be dumped.
Items are instantly moved to the cursor position, the dump flag is unset,
and the forbid flag is set, as if it had been dumped normally.
Be aware that any active dump item tasks still point at the item.</p>
<p>Cursor must be placed on a floor tile so the items can be dumped there.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">destroy:</th><td class="field-body">Destroy instead of dumping. Doesn&#8217;t require a cursor.</td>
</tr>
<tr class="field-even field"><th class="field-name">destroy-here:</th><td class="field-body">Destroy items only under the cursor.  Alias <code class="docutils literal"><span class="pre">autodump-destroy-here</span></code>, for keybindings.</td>
</tr>
<tr class="field-odd field"><th class="field-name">visible:</th><td class="field-body">Only process items that are not hidden.</td>
</tr>
<tr class="field-even field"><th class="field-name">hidden:</th><td class="field-body">Only process hidden items.</td>
</tr>
<tr class="field-odd field"><th class="field-name">forbidden:</th><td class="field-body">Only process forbidden items (default: only unforbidden).</td>
</tr>
</tbody>
</table>
<div class="section" id="autodump-destroy-item">
<h5>autodump-destroy-item<a class="headerlink" href="#autodump-destroy-item" title="Permalink to this headline">¶</a></h5>
<p>Destroy the selected item. The item may be selected in the <code class="docutils literal"><span class="pre">k</span></code> list, or inside
a container. If called again before the game is resumed, cancels destroy.</p>
</div>
</div>
<div class="section" id="cleanowned">
<h4><a class="toc-backref" href="#id63">cleanowned</a><a class="headerlink" href="#cleanowned" title="Permalink to this headline">¶</a></h4>
<p>Confiscates items owned by dwarfs. By default, owned food on the floor
and rotten items are confistacted and dumped.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">confiscate all owned items</td>
</tr>
<tr class="field-even field"><th class="field-name">scattered:</th><td class="field-body">confiscated and dump all items scattered on the floor</td>
</tr>
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body">confiscate/dump items with wear level &#8216;x&#8217; and more</td>
</tr>
<tr class="field-even field"><th class="field-name">X:</th><td class="field-body">confiscate/dump items with wear level &#8216;X&#8217; and more</td>
</tr>
<tr class="field-odd field"><th class="field-name">dryrun:</th><td class="field-body">a dry run. combine with other options to see what will happen
without it actually happening.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">cleanowned</span> <span class="pre">scattered</span> <span class="pre">X</span></code></dt>
<dd>This will confiscate rotten and dropped food, garbage on the floors and any
worn items with &#8216;X&#8217; damage and above.</dd>
</dl>
</div>
</div>
<div class="section" id="fortress-activity-management">
<h3><a class="toc-backref" href="#id64">Fortress activity management</a><a class="headerlink" href="#fortress-activity-management" title="Permalink to this headline">¶</a></h3>
<div class="section" id="dwarfmonitor">
<h4><a class="toc-backref" href="#id65">dwarfmonitor</a><a class="headerlink" href="#dwarfmonitor" title="Permalink to this headline">¶</a></h4>
<p>Records dwarf activity to measure fort efficiency.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">enable &lt;mode&gt;:</th><td class="field-body">Start monitoring <code class="docutils literal"><span class="pre">mode</span></code>. <code class="docutils literal"><span class="pre">mode</span></code> can be &#8220;work&#8221;, &#8220;misery&#8221;,
&#8220;weather&#8221;, or &#8220;all&#8221;.  This will enable all corresponding widgets,
if applicable.</td>
</tr>
<tr class="field-even field"><th class="field-name">disable &lt;mode&gt;:</th><td class="field-body">Stop monitoring <code class="docutils literal"><span class="pre">mode</span></code>, and disable corresponding widgets, if applicable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">stats:</th><td class="field-body">Show statistics summary</td>
</tr>
<tr class="field-even field"><th class="field-name">prefs:</th><td class="field-body">Show dwarf preferences summary</td>
</tr>
<tr class="field-odd field"><th class="field-name">reload:</th><td class="field-body">Reload configuration file (<code class="docutils literal"><span class="pre">dfhack-config/dwarfmonitor.json</span></code>)</td>
</tr>
</tbody>
</table>
<p>Widget configuration:</p>
<p>The following types of widgets (defined in <code class="docutils literal"><span class="pre">hack/lua/plugins/dwarfmonitor.lua</span></code>)
can be displayed on the main fortress mode screen:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">Show the in-game date</td>
</tr>
<tr class="field-even field"><th class="field-name">misery:</th><td class="field-body">Show overall happiness levels of all dwarves</td>
</tr>
<tr class="field-odd field"><th class="field-name">weather:</th><td class="field-body">Show current weather (rain/snow)</td>
</tr>
<tr class="field-even field"><th class="field-name">cursor:</th><td class="field-body">Show the current mouse cursor position</td>
</tr>
</tbody>
</table>
<p>The file <code class="docutils literal"><span class="pre">dfhack-config/dwarfmonitor.json</span></code> can be edited to control the
positions and settings of all widgets displayed. This file should contain a
JSON object with the key <code class="docutils literal"><span class="pre">widgets</span></code> containing an array of objects - see the
included file in the <code class="docutils literal"><span class="pre">dfhack-config</span></code> folder for an example:</p>
<div class="highlight-python"><div class="highlight"><pre>{
    &quot;widgets&quot;: [
        {
            &quot;type&quot;: &quot;widget type (weather, misery, etc.)&quot;,
            &quot;x&quot;: X coordinate,
            &quot;y&quot;: Y coordinate
            &lt;...additional options...&gt;
        }
    ]
}
</pre></div>
</div>
<p>X and Y coordinates begin at zero (in the upper left corner of the screen).
Negative coordinates will be treated as distances from the lower right corner,
beginning at 1 - e.g. an x coordinate of 0 is the leftmost column, while an x
coordinate of 1 is the rightmost column.</p>
<p>By default, the x and y coordinates given correspond to the leftmost tile of
the widget. Including an <code class="docutils literal"><span class="pre">anchor</span></code> option set to <code class="docutils literal"><span class="pre">right</span></code> will cause the
rightmost tile of the widget to be located at this position instead.</p>
<p>Some widgets support additional options:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">date</span></code> widget:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">format</span></code>: specifies the format of the date. The following characters
are replaced (all others, such as punctuation, are not modified)</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Y</span></code> or <code class="docutils literal"><span class="pre">y</span></code>: The current year</li>
<li><code class="docutils literal"><span class="pre">M</span></code>: The current month, zero-padded if necessary</li>
<li><code class="docutils literal"><span class="pre">m</span></code>: The current month, <em>not</em> zero-padded</li>
<li><code class="docutils literal"><span class="pre">D</span></code>: The current day, zero-padded if necessary</li>
<li><code class="docutils literal"><span class="pre">d</span></code>: The current day, <em>not</em> zero-padded</li>
</ul>
<p>The default date format is <code class="docutils literal"><span class="pre">Y-M-D</span></code>.</p>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">cursor</span></code> widget:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">format</span></code>: Specifies the format. <code class="docutils literal"><span class="pre">X</span></code>, <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">Y</span></code>, and <code class="docutils literal"><span class="pre">y</span></code> are
replaced with the corresponding cursor cordinates, while all other
characters are unmodified.</li>
<li><code class="docutils literal"><span class="pre">show_invalid</span></code>: If set to <code class="docutils literal"><span class="pre">true</span></code>, the mouse coordinates will both be
displayed as <code class="docutils literal"><span class="pre">-1</span></code> when the cursor is outside of the DF window; otherwise,
nothing will be displayed.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="worknow">
<h4><a class="toc-backref" href="#id66">workNow</a><a class="headerlink" href="#worknow" title="Permalink to this headline">¶</a></h4>
<p>Force all dwarves to look for a job immediately, or as soon as the game is unpaused.</p>
</div>
<div class="section" id="seedwatch">
<h4><a class="toc-backref" href="#id67">seedwatch</a><a class="headerlink" href="#seedwatch" title="Permalink to this headline">¶</a></h4>
<p>Watches the numbers of seeds available and enables/disables seed and plant cooking.</p>
<p>Each plant type can be assigned a limit. If their number falls below that limit,
the plants and seeds of that type will be excluded from cookery.
If the number rises above the limit + 20, then cooking will be allowed.</p>
<p>The plugin needs a fortress to be loaded and will deactivate automatically otherwise.
You have to reactivate with &#8216;seedwatch start&#8217; after you load the game.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">Adds all plants from the abbreviation list to the watch list.</td>
</tr>
<tr class="field-even field"><th class="field-name">start:</th><td class="field-body">Start watching.</td>
</tr>
<tr class="field-odd field"><th class="field-name">stop:</th><td class="field-body">Stop watching.</td>
</tr>
<tr class="field-even field"><th class="field-name">info:</th><td class="field-body">Display whether seedwatch is watching, and the watch list.</td>
</tr>
<tr class="field-odd field"><th class="field-name">clear:</th><td class="field-body">Clears the watch list.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">seedwatch</span> <span class="pre">MUSHROOM_HELMET_PLUMP</span> <span class="pre">30</span></code></dt>
<dd>add <code class="docutils literal"><span class="pre">MUSHROOM_HELMET_PLUMP</span></code> to the watch list, limit = 30</dd>
<dt><code class="docutils literal"><span class="pre">seedwatch</span> <span class="pre">MUSHROOM_HELMET_PLUMP</span></code></dt>
<dd>removes <code class="docutils literal"><span class="pre">MUSHROOM_HELMET_PLUMP</span></code> from the watch list.</dd>
<dt><code class="docutils literal"><span class="pre">seedwatch</span> <span class="pre">all</span> <span class="pre">30</span></code></dt>
<dd>adds all plants from the abbreviation list to the watch list, the limit being 30.</dd>
</dl>
</div>
<div class="section" id="zone">
<span id="plugins-zone"></span><h4><a class="toc-backref" href="#id68">zone</a><a class="headerlink" href="#zone" title="Permalink to this headline">¶</a></h4>
<p>Helps a bit with managing activity zones (pens, pastures and pits) and cages.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">set:</th><td class="field-body">Set zone or cage under cursor as default for future assigns.</td>
</tr>
<tr class="field-even field"><th class="field-name">assign:</th><td class="field-body">Assign unit(s) to the pen or pit marked with the &#8216;set&#8217; command.
If no filters are set a unit must be selected in the in-game ui.
Can also be followed by a valid zone id which will be set
instead.</td>
</tr>
<tr class="field-odd field"><th class="field-name">unassign:</th><td class="field-body">Unassign selected creature from it&#8217;s zone.</td>
</tr>
<tr class="field-even field"><th class="field-name">nick:</th><td class="field-body">Mass-assign nicknames, must be followed by the name you want
to set.</td>
</tr>
<tr class="field-odd field"><th class="field-name">remnick:</th><td class="field-body">Mass-remove nicknames.</td>
</tr>
<tr class="field-even field"><th class="field-name">tocages:</th><td class="field-body">Assign unit(s) to cages inside a pasture.</td>
</tr>
<tr class="field-odd field"><th class="field-name">uinfo:</th><td class="field-body">Print info about unit(s). If no filters are set a unit must
be selected in the in-game ui.</td>
</tr>
<tr class="field-even field"><th class="field-name">zinfo:</th><td class="field-body">Print info about zone(s). If no filters are set zones under
the cursor are listed.</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbose:</th><td class="field-body">Print some more info.</td>
</tr>
<tr class="field-even field"><th class="field-name">filters:</th><td class="field-body">Print list of valid filter options.</td>
</tr>
<tr class="field-odd field"><th class="field-name">examples:</th><td class="field-body">Print some usage examples.</td>
</tr>
<tr class="field-even field"><th class="field-name">not:</th><td class="field-body">Negates the next filter keyword.</td>
</tr>
</tbody>
</table>
<p>Filters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">Process all units (to be used with additional filters).</td>
</tr>
<tr class="field-even field"><th class="field-name">count:</th><td class="field-body">Must be followed by a number. Process only n units (to be used
with additional filters).</td>
</tr>
<tr class="field-odd field"><th class="field-name">unassigned:</th><td class="field-body">Not assigned to zone, chain or built cage.</td>
</tr>
<tr class="field-even field"><th class="field-name">minage:</th><td class="field-body">Minimum age. Must be followed by number.</td>
</tr>
<tr class="field-odd field"><th class="field-name">maxage:</th><td class="field-body">Maximum age. Must be followed by number.</td>
</tr>
<tr class="field-even field"><th class="field-name">race:</th><td class="field-body">Must be followed by a race RAW ID (e.g. BIRD_TURKEY, ALPACA,
etc). Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">caged:</th><td class="field-body">In a built cage. Negatable.</td>
</tr>
<tr class="field-even field"><th class="field-name">own:</th><td class="field-body">From own civilization. Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">merchant:</th><td class="field-body">Is a merchant / belongs to a merchant. Should only be used for
pitting, not for stealing animals (slaughter should work).</td>
</tr>
<tr class="field-even field"><th class="field-name">war:</th><td class="field-body">Trained war creature. Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">hunting:</th><td class="field-body">Trained hunting creature. Negatable.</td>
</tr>
<tr class="field-even field"><th class="field-name">tamed:</th><td class="field-body">Creature is tame. Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">trained:</th><td class="field-body">Creature is trained. Finds war/hunting creatures as well as
creatures who have a training level greater than &#8216;domesticated&#8217;.
If you want to specifically search for war/hunting creatures use
&#8216;war&#8217; or &#8216;hunting&#8217; Negatable.</td>
</tr>
<tr class="field-even field"><th class="field-name">trainablewar:</th><td class="field-body">Creature can be trained for war (and is not already trained for
war/hunt). Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">trainablehunt:</th><td class="field-body">Creature can be trained for hunting (and is not already trained
for war/hunt). Negatable.</td>
</tr>
<tr class="field-even field"><th class="field-name">male:</th><td class="field-body">Creature is male. Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">female:</th><td class="field-body">Creature is female. Negatable.</td>
</tr>
<tr class="field-even field"><th class="field-name">egglayer:</th><td class="field-body">Race lays eggs. Negatable.</td>
</tr>
<tr class="field-odd field"><th class="field-name">grazer:</th><td class="field-body">Race is a grazer. Negatable.</td>
</tr>
<tr class="field-even field"><th class="field-name">milkable:</th><td class="field-body">Race is milkable. Negatable.</td>
</tr>
</tbody>
</table>
<div class="section" id="usage-with-single-units">
<h5>Usage with single units<a class="headerlink" href="#usage-with-single-units" title="Permalink to this headline">¶</a></h5>
<p>One convenient way to use the zone tool is to bind the command &#8216;zone assign&#8217; to
a hotkey, maybe also the command &#8216;zone set&#8217;. Place the in-game cursor over
a pen/pasture or pit, use &#8216;zone set&#8217; to mark it. Then you can select units
on the map (in &#8216;v&#8217; or &#8216;k&#8217; mode), in the unit list or from inside cages
and use &#8216;zone assign&#8217; to assign them to their new home. Allows pitting your
own dwarves, by the way.</p>
</div>
<div class="section" id="usage-with-filters">
<h5>Usage with filters<a class="headerlink" href="#usage-with-filters" title="Permalink to this headline">¶</a></h5>
<p>All filters can be used together with the &#8216;assign&#8217; command.</p>
<p>Restrictions: It&#8217;s not possible to assign units who are inside built cages
or chained because in most cases that won&#8217;t be desirable anyways.
It&#8217;s not possible to cage owned pets because in that case the owner
uncages them after a while which results in infinite hauling back and forth.</p>
<p>Usually you should always use the filter &#8216;own&#8217; (which implies tame) unless you
want to use the zone tool for pitting hostiles. &#8216;own&#8217; ignores own dwarves unless
you specify &#8216;race DWARF&#8217; (so it&#8217;s safe to use &#8216;assign all own&#8217; to one big
pasture if you want to have all your animals at the same place). &#8216;egglayer&#8217; and
&#8216;milkable&#8217; should be used together with &#8216;female&#8217; unless you have a mod with
egg-laying male elves who give milk or whatever. Merchants and their animals are
ignored unless you specify &#8216;merchant&#8217; (pitting them should be no problem,
but stealing and pasturing their animals is not a good idea since currently they
are not properly added to your own stocks; slaughtering them should work).</p>
<p>Most filters can be negated (e.g. &#8216;not grazer&#8217; -&gt; race is not a grazer).</p>
</div>
<div class="section" id="mass-renaming">
<h5>Mass-renaming<a class="headerlink" href="#mass-renaming" title="Permalink to this headline">¶</a></h5>
<p>Using the &#8216;nick&#8217; command you can set the same nickname for multiple units.
If used without &#8216;assign&#8217;, &#8216;all&#8217; or &#8216;count&#8217; it will rename all units in the
current default target zone. Combined with &#8216;assign&#8217;, &#8216;all&#8217; or &#8216;count&#8217; (and
further optional filters) it will rename units matching the filter conditions.</p>
</div>
<div class="section" id="cage-zones">
<h5>Cage zones<a class="headerlink" href="#cage-zones" title="Permalink to this headline">¶</a></h5>
<p>Using the &#8216;tocages&#8217; command you can assign units to a set of cages, for example
a room next to your butcher shop(s). They will be spread evenly among available
cages to optimize hauling to and butchering from them. For this to work you need
to build cages and then place one pen/pasture activity zone above them, covering
all cages you want to use. Then use &#8216;zone set&#8217; (like with &#8216;assign&#8217;) and use
&#8216;zone tocages filter1 filter2 ...&#8217;. &#8216;tocages&#8217; overwrites &#8216;assign&#8217; because it
would make no sense, but can be used together with &#8216;nick&#8217; or &#8216;remnick&#8217; and all
the usual filters.</p>
</div>
<div class="section" id="examples">
<h5>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">assign</span> <span class="pre">all</span> <span class="pre">own</span> <span class="pre">ALPACA</span> <span class="pre">minage</span> <span class="pre">3</span> <span class="pre">maxage</span> <span class="pre">10</span></code></dt>
<dd>Assign all own alpacas who are between 3 and 10 years old to the selected
pasture.</dd>
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">assign</span> <span class="pre">all</span> <span class="pre">own</span> <span class="pre">caged</span> <span class="pre">grazer</span> <span class="pre">nick</span> <span class="pre">ineedgrass</span></code></dt>
<dd>Assign all own grazers who are sitting in cages on stockpiles (e.g. after
buying them from merchants) to the selected pasture and give them
the nickname &#8216;ineedgrass&#8217;.</dd>
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">assign</span> <span class="pre">all</span> <span class="pre">own</span> <span class="pre">not</span> <span class="pre">grazer</span> <span class="pre">not</span> <span class="pre">race</span> <span class="pre">CAT</span></code></dt>
<dd>Assign all own animals who are not grazers, excluding cats.</dd>
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">assign</span> <span class="pre">count</span> <span class="pre">5</span> <span class="pre">own</span> <span class="pre">female</span> <span class="pre">milkable</span></code></dt>
<dd>Assign up to 5 own female milkable creatures to the selected pasture.</dd>
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">assign</span> <span class="pre">all</span> <span class="pre">own</span> <span class="pre">race</span> <span class="pre">DWARF</span> <span class="pre">maxage</span> <span class="pre">2</span></code></dt>
<dd>Throw all useless kids into a pit :)</dd>
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">nick</span> <span class="pre">donttouchme</span></code></dt>
<dd>Nicknames all units in the current default zone or cage to &#8216;donttouchme&#8217;.
Mostly intended to be used for special pastures or cages which are not marked
as rooms you want to protect from autobutcher.</dd>
<dt><code class="docutils literal"><span class="pre">zone</span> <span class="pre">tocages</span> <span class="pre">count</span> <span class="pre">50</span> <span class="pre">own</span> <span class="pre">tame</span> <span class="pre">male</span> <span class="pre">not</span> <span class="pre">grazer</span></code></dt>
<dd>Stuff up to 50 owned tame male animals who are not grazers into cages built
on the current default zone.</dd>
</dl>
</div>
</div>
<div class="section" id="autonestbox">
<h4><a class="toc-backref" href="#id69">autonestbox</a><a class="headerlink" href="#autonestbox" title="Permalink to this headline">¶</a></h4>
<p>Assigns unpastured female egg-layers to nestbox zones. Requires that you create
pen/pasture zones above nestboxes. If the pen is bigger than 1x1 the nestbox
must be in the top left corner. Only 1 unit will be assigned per pen, regardless
of the size. The age of the units is currently not checked, most birds grow up
quite fast. Egglayers who are also grazers will be ignored, since confining them
to a 1x1 pasture is not a good idea. Only tame and domesticated own units are
processed since pasturing half-trained wild egglayers could destroy your neat
nestbox zones when they revert to wild. When called without options autonestbox
will instantly run once.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">start:</th><td class="field-body">Start running every X frames (df simulation ticks).
Default: X=6000, which would be every 60 seconds at 100fps.</td>
</tr>
<tr class="field-even field"><th class="field-name">stop:</th><td class="field-body">Stop running automatically.</td>
</tr>
<tr class="field-odd field"><th class="field-name">sleep:</th><td class="field-body">Must be followed by number X. Changes the timer to sleep X
frames between runs.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="autobutcher">
<span id="plugins-autobutcher"></span><h4><a class="toc-backref" href="#id70">autobutcher</a><a class="headerlink" href="#autobutcher" title="Permalink to this headline">¶</a></h4>
<p>Assigns lifestock for slaughter once it reaches a specific count. Requires that
you add the target race(s) to a watch list. Only tame units will be processed.</p>
<p>Units will be ignored if they are:</p>
<ul class="simple">
<li>Nicknamed (for custom protection; you can use the <a class="reference internal" href="#plugins-rename"><span>rename</span></a> <code class="docutils literal"><span class="pre">unit</span></code> tool
individually, or <a class="reference internal" href="#plugins-zone"><span>zone</span></a> <code class="docutils literal"><span class="pre">nick</span></code> for groups)</li>
<li>Caged, if and only if the cage is defined as a room (to protect zoos)</li>
<li>Trained for war or hunting</li>
</ul>
<p>Creatures who will not reproduce (because they&#8217;re not interested in the
opposite sex or have been gelded) will be butchered before those who will.
Older adults and younger children will be butchered first if the population
is above the target (default 1 male, 5 female kids and adults).  Note that
you may need to set a target above 1 to have a reliable breeding population
due to asexuality etc.  See <a class="reference internal" href="Scripts.html#scripts-fix-ster"><span>fix-ster</span></a> if this is a problem.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">example:</th><td class="field-body">Print some usage examples.</td>
</tr>
<tr class="field-even field"><th class="field-name">start:</th><td class="field-body">Start running every X frames (df simulation ticks).
Default: X=6000, which would be every 60 seconds at 100fps.</td>
</tr>
<tr class="field-odd field"><th class="field-name">stop:</th><td class="field-body">Stop running automatically.</td>
</tr>
<tr class="field-even field"><th class="field-name">sleep &lt;x&gt;:</th><td class="field-body">Changes the timer to sleep X frames between runs.</td>
</tr>
<tr class="field-odd field"><th class="field-name">watch R:</th><td class="field-body">Start watching a race. R can be a valid race RAW id (ALPACA,
BIRD_TURKEY, etc) or a list of ids seperated by spaces or
the keyword &#8216;all&#8217; which affects all races on your current
watchlist.</td>
</tr>
<tr class="field-even field"><th class="field-name">unwatch R:</th><td class="field-body">Stop watching race(s). The current target settings will be
remembered. R can be a list of ids or the keyword &#8216;all&#8217;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">forget R:</th><td class="field-body">Stop watching race(s) and forget it&#8217;s/their target settings.
R can be a list of ids or the keyword &#8216;all&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name">autowatch:</th><td class="field-body">Automatically adds all new races (animals you buy from merchants,
tame yourself or get from migrants) to the watch list using
default target count.</td>
</tr>
<tr class="field-odd field"><th class="field-name">noautowatch:</th><td class="field-body">Stop auto-adding new races to the watchlist.</td>
</tr>
<tr class="field-even field"><th class="field-name">list:</th><td class="field-body">Print the current status and watchlist.</td>
</tr>
<tr class="field-odd field"><th class="field-name">list_export:</th><td class="field-body">Print the commands needed to set up status and watchlist,
which can be used to import them to another save (see notes).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">target &lt;fk&gt; &lt;mk&gt; &lt;fa&gt; &lt;ma&gt; &lt;R&gt;:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Set target count for specified race(s).  The first four arguments
are the number of female and male kids, and female and male adults.
R can be a list of spceies ids, or the keyword <code class="docutils literal"><span class="pre">all</span></code> or <code class="docutils literal"><span class="pre">new</span></code>.
<code class="docutils literal"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">'all'</span></code>: change target count for all races on watchlist
and set the new default for the future. <code class="docutils literal"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">'new'</span></code>: don&#8217;t touch
current settings on the watchlist, only set the new default
for future entries.</td>
</tr>
<tr class="field-odd field"><th class="field-name">list_export:</th><td class="field-body">Print the commands required to rebuild your current settings.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Settings and watchlist are stored in the savegame, so that you can have
different settings for each save. If you want to copy your watchlist to
another savegame you must export the commands required to recreate your settings.</p>
<p class="last">To export, open an external terminal in the DF directory, and run
<code class="docutils literal"><span class="pre">dfhack-run</span> <span class="pre">autobutcher</span> <span class="pre">list_export</span> <span class="pre">&gt;</span> <span class="pre">filename.txt</span></code>.  To import, load your
new save and run <code class="docutils literal"><span class="pre">script</span> <span class="pre">filename.txt</span></code> in the DFHack terminal.</p>
</div>
<p>Examples:</p>
<p>You want to keep max 7 kids (4 female, 3 male) and max 3 adults (2 female,
1 male) of the race alpaca. Once the kids grow up the oldest adults will get
slaughtered. Excess kids will get slaughtered starting with the youngest
to allow that the older ones grow into adults. Any unnamed cats will
be slaughtered as soon as possible.</p>
<div class="highlight-python"><div class="highlight"><pre>autobutcher target 4 3 2 1 ALPACA BIRD_TURKEY
autobutcher target 0 0 0 0 CAT
autobutcher watch ALPACA BIRD_TURKEY CAT
autobutcher start
</pre></div>
</div>
<p>Automatically put all new races onto the watchlist and mark unnamed tame units
for slaughter as soon as they arrive in your fort. Settings already made
for specific races will be left untouched.</p>
<div class="highlight-python"><div class="highlight"><pre>autobutcher target 0 0 0 0 new
autobutcher autowatch
autobutcher start
</pre></div>
</div>
<p>Stop watching the races alpaca and cat, but remember the target count
settings so that you can use &#8216;unwatch&#8217; without the need to enter the
values again. Note: &#8216;autobutcher unwatch all&#8217; works, but only makes sense
if you want to keep the plugin running with the &#8216;autowatch&#8217; feature or manually
add some new races with &#8216;watch&#8217;. If you simply want to stop it completely use
&#8216;autobutcher stop&#8217; instead.</p>
<div class="highlight-python"><div class="highlight"><pre>autobutcher unwatch ALPACA CAT
</pre></div>
</div>
</div>
<div class="section" id="autochop">
<h4><a class="toc-backref" href="#id71">autochop</a><a class="headerlink" href="#autochop" title="Permalink to this headline">¶</a></h4>
<p>Automatically manage tree cutting designation to keep available logs withing given
quotas.</p>
<p>Open the dashboard by running:</p>
<div class="highlight-python"><div class="highlight"><pre>getplants autochop
</pre></div>
</div>
<p>The plugin must be activated (with <code class="docutils literal"><span class="pre">c</span></code>) before it can be used. You can then set logging quotas
and restrict designations to specific burrows (with &#8216;Enter&#8217;) if desired. The plugin&#8217;s activity
cycle runs once every in game day.</p>
<p>If you add <code class="docutils literal"><span class="pre">enable</span> <span class="pre">getplants</span></code> to your dfhack.init there will be a hotkey to
open the dashboard from the chop designation menu.</p>
</div>
<div class="section" id="treefarm">
<h4><a class="toc-backref" href="#id72">treefarm</a><a class="headerlink" href="#treefarm" title="Permalink to this headline">¶</a></h4>
<p>Automatically manages special burrows and regularly schedules tree chopping
and digging when appropriate.</p>
<p>Every time the plugin runs, it checks for burrows with a name containing the
string <code class="docutils literal"><span class="pre">&quot;treefarm&quot;</span></code>. For each such burrow, it checks every tile in it for
fully-grown trees and for diggable walls. For each fully-grown tree it finds,
it designates the tree to be chopped, and for each natural wall it finds, it
designates the wall to be dug.</p>
<p>Usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">treefarm:</th><td class="field-body">Enables treefarm monitoring, starting next frame</td>
</tr>
<tr class="field-even field"><th class="field-name">treefarm n:</th><td class="field-body">Enables treefarm monitoring, starting next frame, and sets
interval to n frames.  If n is less than one, disables monitoring.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="adventure-mode">
<h2><a class="toc-backref" href="#id73">Adventure mode</a><a class="headerlink" href="#adventure-mode" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adv-bodyswap">
<h3><a class="toc-backref" href="#id74">adv-bodyswap</a><a class="headerlink" href="#adv-bodyswap" title="Permalink to this headline">¶</a></h3>
<p>This allows taking control over your followers and other creatures in adventure
mode. For example, you can make them pick up new arms and armor and equip them
properly.</p>
<p>Usage:</p>
<ul class="simple">
<li>When viewing unit details, body-swaps into that unit.</li>
<li>In the main adventure mode screen, reverts transient swap.</li>
</ul>
</div>
<div class="section" id="advtools">
<h3><a class="toc-backref" href="#id75">advtools</a><a class="headerlink" href="#advtools" title="Permalink to this headline">¶</a></h3>
<p>A package of different adventure mode tools.  Usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">list-equipped [all]:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">List armor and weapons equipped by your companions.
If all is specified, also lists non-metal clothing.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">metal-detector [all-types] [non-trader]:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Reveal metal armor and weapons in shops. The options
disable the checks on item type and being in shop.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="map-modification">
<h2><a class="toc-backref" href="#id76">Map modification</a><a class="headerlink" href="#map-modification" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dveins">
<h3><a class="toc-backref" href="#id77">3dveins</a><a class="headerlink" href="#dveins" title="Permalink to this headline">¶</a></h3>
<p>Removes all existing veins from the map and generates new ones using
3D Perlin noise, in order to produce a layout that smoothly flows between
Z levels. The vein distribution is based on the world seed, so running
the command for the second time should produce no change. It is best to
run it just once immediately after embark.</p>
<p>This command is intended as only a cosmetic change, so it takes
care to exactly preserve the mineral counts reported by <a class="reference internal" href="#plugins-prospect"><span>prospect</span></a> <code class="docutils literal"><span class="pre">all</span></code>.
The amounts of different layer stones may slightly change in some cases
if vein mass shifts between Z layers.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There is no undo option other than restoring from backup.</p>
</div>
</div>
<div class="section" id="changelayer">
<h3><a class="toc-backref" href="#id78">changelayer</a><a class="headerlink" href="#changelayer" title="Permalink to this headline">¶</a></h3>
<p>Changes material of the geology layer under cursor to the specified inorganic
RAW material. Can have impact on all surrounding regions, not only your embark!
By default changing stone to soil and vice versa is not allowed. By default
changes only the layer at the cursor position. Note that one layer can stretch
across lots of z levels. By default changes only the geology which is linked
to the biome under the cursor. That geology might be linked to other biomes
as well, though. Mineral veins and gem clusters will stay on the map. Use
<a class="reference internal" href="#plugins-changevein"><span>changevein</span></a> for them.</p>
<p>tl;dr: You will end up with changing quite big areas in one go, especially if
you use it in lower z levels. Use with care.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">all_biomes:</th><td class="field-body">Change selected layer for all biomes on your map.
Result may be undesirable since the same layer can AND WILL
be on different z-levels for different biomes. Use the tool
&#8216;probe&#8217; to get an idea how layers and biomes are distributed
on your map.</td>
</tr>
<tr class="field-even field"><th class="field-name">all_layers:</th><td class="field-body">Change all layers on your map (only for the selected biome
unless &#8216;all_biomes&#8217; is added).
Candy mountain, anyone? Will make your map quite boring,
but tidy.</td>
</tr>
<tr class="field-odd field"><th class="field-name">force:</th><td class="field-body">Allow changing stone to soil and vice versa. !!THIS CAN HAVE
WEIRD EFFECTS, USE WITH CARE!!
Note that soil will not be magically replaced with stone.
You will, however, get a stone floor after digging so it
will allow the floor to be engraved.
Note that stone will not be magically replaced with soil.
You will, however, get a soil floor after digging so it
could be helpful for creating farm plots on maps with no
soil.</td>
</tr>
<tr class="field-even field"><th class="field-name">verbose:</th><td class="field-body">Give some details about what is being changed.</td>
</tr>
<tr class="field-odd field"><th class="field-name">trouble:</th><td class="field-body">Give some advice about known problems.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">changelayer</span> <span class="pre">GRANITE</span></code></dt>
<dd>Convert layer at cursor position into granite.</dd>
<dt><code class="docutils literal"><span class="pre">changelayer</span> <span class="pre">SILTY_CLAY</span> <span class="pre">force</span></code></dt>
<dd>Convert layer at cursor position into clay even if it&#8217;s stone.</dd>
<dt><code class="docutils literal"><span class="pre">changelayer</span> <span class="pre">MARBLE</span> <span class="pre">all_biomes</span> <span class="pre">all_layers</span></code></dt>
<dd>Convert all layers of all biomes which are not soil into marble.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If you use changelayer and nothing happens, try to pause/unpause the game
for a while and try to move the cursor to another tile. Then try again.
If that doesn&#8217;t help try temporarily changing some other layer, undo your
changes and try again for the layer you want to change. Saving
and reloading your map might also help.</li>
<li>You should be fine if you only change single layers without the use
of &#8216;force&#8217;. Still it&#8217;s advisable to save your game before messing with
the map.</li>
<li>When you force changelayer to convert soil to stone you might experience
weird stuff (flashing tiles, tiles changed all over place etc).
Try reverting the changes manually or even better use an older savegame.
You did save your game, right?</li>
</ul>
</div>
</div>
<div class="section" id="changevein">
<span id="plugins-changevein"></span><h3><a class="toc-backref" href="#id79">changevein</a><a class="headerlink" href="#changevein" title="Permalink to this headline">¶</a></h3>
<p>Changes material of the vein under cursor to the specified inorganic RAW
material. Only affects tiles within the current 16x16 block - for veins and
large clusters, you will need to use this command multiple times.</p>
<p>Example:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">changevein</span> <span class="pre">NATIVE_PLATINUM</span></code></dt>
<dd>Convert vein at cursor position into platinum ore.</dd>
</dl>
</div>
<div class="section" id="changeitem">
<h3><a class="toc-backref" href="#id80">changeitem</a><a class="headerlink" href="#changeitem" title="Permalink to this headline">¶</a></h3>
<p>Allows changing item material and base quality. By default the item currently
selected in the UI will be changed (you can select items in the &#8216;k&#8217; list
or inside containers/inventory). By default change is only allowed if materials
is of the same subtype (for example wood&lt;-&gt;wood, stone&lt;-&gt;stone etc). But since
some transformations work pretty well and may be desired you can override this
with &#8216;force&#8217;. Note that some attributes will not be touched, possibly resulting
in weirdness. To get an idea how the RAW id should look like, check some items
with &#8216;info&#8217;. Using &#8216;force&#8217; might create items which are not touched by
crafters/haulers.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">info:</th><td class="field-body">Don&#8217;t change anything, print some info instead.</td>
</tr>
<tr class="field-even field"><th class="field-name">here:</th><td class="field-body">Change all items at the cursor position. Requires in-game cursor.</td>
</tr>
<tr class="field-odd field"><th class="field-name">material, m:</th><td class="field-body">Change material. Must be followed by valid material RAW id.</td>
</tr>
<tr class="field-even field"><th class="field-name">quality, q:</th><td class="field-body">Change base quality. Must be followed by number (0-5).</td>
</tr>
<tr class="field-odd field"><th class="field-name">force:</th><td class="field-body">Ignore subtypes, force change to new material.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">changeitem</span> <span class="pre">m</span> <span class="pre">INORGANIC:GRANITE</span> <span class="pre">here</span></code></dt>
<dd>Change material of all items under the cursor to granite.</dd>
<dt><code class="docutils literal"><span class="pre">changeitem</span> <span class="pre">q</span> <span class="pre">5</span></code></dt>
<dd>Change currently selected item to masterpiece quality.</dd>
</dl>
</div>
<div class="section" id="cleanconst">
<h3><a class="toc-backref" href="#id81">cleanconst</a><a class="headerlink" href="#cleanconst" title="Permalink to this headline">¶</a></h3>
<p>Cleans up construction materials.</p>
<p>This utility alters all constructions on the map so that they spawn their
building component when they are disassembled, allowing their actual
build items to be safely deleted.  This can improve FPS in extreme situations.</p>
</div>
<div class="section" id="colonies">
<h3><a class="toc-backref" href="#id82">colonies</a><a class="headerlink" href="#colonies" title="Permalink to this headline">¶</a></h3>
<p>Allows listing all the vermin colonies on the map and optionally turning
them into honey bee colonies.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">bees:</th><td class="field-body">turn colonies into honey bee colonies</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="deramp">
<h3><a class="toc-backref" href="#id83">deramp</a><a class="headerlink" href="#deramp" title="Permalink to this headline">¶</a></h3>
<p>Removes all ramps designated for removal from the map. This is useful for
replicating the old channel digging designation.  It also removes any and
all &#8216;down ramps&#8217; that can remain after a cave-in (you don&#8217;t have to designate
anything for that to happen).</p>
</div>
<div class="section" id="feature">
<h3><a class="toc-backref" href="#id84">feature</a><a class="headerlink" href="#feature" title="Permalink to this headline">¶</a></h3>
<p>Enables management of map features.</p>
<ul class="simple">
<li>Discovering a magma feature (magma pool, volcano, magma sea, or curious
underground structure) permits magma workshops and furnaces to be built.</li>
<li>Discovering a cavern layer causes plants (trees, shrubs, and grass) from
that cavern to grow within your fortress.</li>
</ul>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">list:</th><td class="field-body">Lists all map features in your current embark by index.</td>
</tr>
<tr class="field-even field"><th class="field-name">show X:</th><td class="field-body">Marks the selected map feature as discovered.</td>
</tr>
<tr class="field-odd field"><th class="field-name">hide X:</th><td class="field-body">Marks the selected map feature as undiscovered.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fortplan">
<span id="plugins-fortplan"></span><h3><a class="toc-backref" href="#id85">fortplan</a><a class="headerlink" href="#fortplan" title="Permalink to this headline">¶</a></h3>
<p>Usage: fortplan [filename]</p>
<p>Designates furniture for building according to a .csv file with
quickfort-style syntax. Companion to <a class="reference internal" href="Scripts.html#scripts-digfort"><span>digfort</span></a>.</p>
<p>The first line of the file must contain the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#build start(X; Y; &lt;start location description&gt;)</span>
</pre></div>
</div>
<p>...where X and Y are the offset from the top-left corner of the file&#8217;s area
where the in-game cursor should be located, and <code class="docutils literal"><span class="pre">&lt;start</span> <span class="pre">location</span> <span class="pre">description&gt;</span></code>
is an optional description of where that is. You may also leave a description
of the contents of the file itself following the closing parenthesis on the
same line.</p>
<p>The syntax of the file itself is similar to <a class="reference internal" href="Scripts.html#scripts-digfort"><span>digfort</span></a> or
<a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=35931">quickfort</a>. At present,
only buildings constructed of an item with the same name as the building
are supported. All other characters are ignored. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>`,`,d,`,`
`,f,`,t,`
`,s,b,c,`
</pre></div>
</div>
<p>This section of a file would designate for construction a door and some
furniture inside a bedroom: specifically, clockwise from top left, a cabinet,
a table, a chair, a bed, and a statue.</p>
<p>All of the building designation uses Planning Mode, so you do not need to
have the items available to construct all the buildings when you run
fortplan with the .csv file.</p>
</div>
<div class="section" id="infinitesky">
<h3><a class="toc-backref" href="#id86">infiniteSky</a><a class="headerlink" href="#infinitesky" title="Permalink to this headline">¶</a></h3>
<p>Automatically allocates new z-levels of sky at the top of the map as you build up,
or on request allocates many levels all at once.</p>
<p>Usage:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">infiniteSky</span> <span class="pre">n</span></code></dt>
<dd>Raise the sky by n z-levels.</dd>
<dt><code class="docutils literal"><span class="pre">infiniteSky</span> <span class="pre">enable/disable</span></code></dt>
<dd><blockquote class="first">
<div>Enables/disables monitoring of constructions. If you build anything in the second to highest z-level, it will allocate one more sky level. This is so you can continue to build stairs upward.</div></blockquote>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Bugs have been reported with this version of the plugin, so be careful.
It is possible that new z-levels will suddenly disappear and possibly
cause cave-ins. Saving and loading after creating new z-levels should
fix the problem.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="liquids">
<span id="plugins-liquids"></span><h3><a class="toc-backref" href="#id87">liquids</a><a class="headerlink" href="#liquids" title="Permalink to this headline">¶</a></h3>
<p>Allows adding magma, water and obsidian to the game. It replaces the normal
dfhack command line and can&#8217;t be used from a hotkey. Settings will be remembered
as long as dfhack runs. Intended for use in combination with the command
<code class="docutils literal"><span class="pre">liquids-here</span></code> (which can be bound to a hotkey).</p>
<p>See also <a class="reference external" href="https://github.com/DFHack/dfhack/issues/80">this issue.</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Spawning and deleting liquids can F up pathing data and
temperatures (creating heat traps). You&#8217;ve been warned.</p>
</div>
<p>Settings will be remembered until you quit DF. You can call liquids-here to execute
the last configured action, which is useful in combination with keybindings.</p>
<p>Usage: point the DF cursor at a tile you want to modify and use the commands available :)</p>
<div class="section" id="commands">
<h4><a class="toc-backref" href="#id88">Commands</a><a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h4>
<p>Misc commands:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">q:</th><td class="field-body">quit</td>
</tr>
<tr class="field-even field"><th class="field-name">help, ?:</th><td class="field-body">print this list of commands</td>
</tr>
<tr class="field-odd field"><th class="field-name">&lt;empty line&gt;:</th><td class="field-body">put liquid</td>
</tr>
</tbody>
</table>
<p>Modes:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">m:</th><td class="field-body">switch to magma</td>
</tr>
<tr class="field-even field"><th class="field-name">w:</th><td class="field-body">switch to water</td>
</tr>
<tr class="field-odd field"><th class="field-name">o:</th><td class="field-body">make obsidian wall instead</td>
</tr>
<tr class="field-even field"><th class="field-name">of:</th><td class="field-body">make obsidian floors</td>
</tr>
<tr class="field-odd field"><th class="field-name">rs:</th><td class="field-body">make a river source</td>
</tr>
<tr class="field-even field"><th class="field-name">f:</th><td class="field-body">flow bits only</td>
</tr>
<tr class="field-odd field"><th class="field-name">wclean:</th><td class="field-body">remove salt and stagnant flags from tiles</td>
</tr>
</tbody>
</table>
<p>Set-Modes and flow properties (only for magma/water):</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">s+:</th><td class="field-body">only add mode</td>
</tr>
<tr class="field-even field"><th class="field-name">s.:</th><td class="field-body">set mode</td>
</tr>
<tr class="field-odd field"><th class="field-name">s-:</th><td class="field-body">only remove mode</td>
</tr>
<tr class="field-even field"><th class="field-name">f+:</th><td class="field-body">make the spawned liquid flow</td>
</tr>
<tr class="field-odd field"><th class="field-name">f.:</th><td class="field-body">don&#8217;t change flow state (read state in flow mode)</td>
</tr>
<tr class="field-even field"><th class="field-name">f-:</th><td class="field-body">make the spawned liquid static</td>
</tr>
</tbody>
</table>
<p>Permaflow (only for water):</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">pf.:</th><td class="field-body">don&#8217;t change permaflow state</td>
</tr>
<tr class="field-even field"><th class="field-name">pf-:</th><td class="field-body">make the spawned liquid static</td>
</tr>
<tr class="field-odd field"><th class="field-name">pf[NS][EW]:</th><td class="field-body">make the spawned liquid permanently flow</td>
</tr>
<tr class="field-even field"><th class="field-name">0-7:</th><td class="field-body">set liquid amount</td>
</tr>
</tbody>
</table>
<p>Brush size and shape:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">p, point:</th><td class="field-body">Single tile</td>
</tr>
<tr class="field-even field"><th class="field-name">r, range:</th><td class="field-body">Block with cursor at bottom north-west (any place, any size)</td>
</tr>
<tr class="field-odd field"><th class="field-name">block:</th><td class="field-body">DF map block with cursor in it (regular spaced 16x16x1 blocks)</td>
</tr>
<tr class="field-even field"><th class="field-name">column:</th><td class="field-body">Column from cursor, up through free space</td>
</tr>
<tr class="field-odd field"><th class="field-name">flood:</th><td class="field-body">Flood-fill water tiles from cursor (only makes sense with wclean)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="liquids-here">
<h4><a class="toc-backref" href="#id89">liquids-here</a><a class="headerlink" href="#liquids-here" title="Permalink to this headline">¶</a></h4>
<p>Run the liquid spawner with the current/last settings made in liquids (if no
settings in liquids were made it paints a point of 7/7 magma by default).</p>
<p>Intended to be used as keybinding. Requires an active in-game cursor.</p>
</div>
</div>
<div class="section" id="tiletypes">
<h3><a class="toc-backref" href="#id90">tiletypes</a><a class="headerlink" href="#tiletypes" title="Permalink to this headline">¶</a></h3>
<p>Can be used for painting map tiles and is an interactive command, much like
liquids.</p>
<p>The tool works with two set of options and a brush. The brush determines which
tiles will be processed. First set of options is the filter, which can exclude
some of the tiles from the brush by looking at the tile properties. The second
set of options is the paint - this determines how the selected tiles are
changed.</p>
<p>Both paint and filter can have many different properties including things like
general shape (WALL, FLOOR, etc.), general material (SOIL, STONE, MINERAL,
etc.), state of &#8216;designated&#8217;, &#8216;hidden&#8217; and &#8216;light&#8217; flags.</p>
<p>The properties of filter and paint can be partially defined. This means that
you can for example turn all stone fortifications into floors, preserving the
material:</p>
<div class="highlight-python"><div class="highlight"><pre>filter material STONE
filter shape FORTIFICATION
paint shape FLOOR
</pre></div>
</div>
<p>Or turn mineral vein floors back into walls:</p>
<div class="highlight-python"><div class="highlight"><pre>filter shape FLOOR
filter material MINERAL
paint shape WALL
</pre></div>
</div>
<p>The tool also allows tweaking some tile flags:</p>
<div class="highlight-python"><div class="highlight"><pre>paint hidden 1
paint hidden 0
</pre></div>
</div>
<p>This will hide previously revealed tiles (or show hidden with the 0 option).</p>
<p>More recently, the tool supports changing the base material of the tile to
an arbitrary stone from the raws, by creating new veins as required. Note
that this mode paints under ice and constructions, instead of overwriting
them. To enable, use:</p>
<div class="highlight-python"><div class="highlight"><pre>paint stone MICROCLINE
</pre></div>
</div>
<p>This mode is incompatible with the regular <code class="docutils literal"><span class="pre">material</span></code> setting, so changing
it cancels the specific stone selection:</p>
<div class="highlight-python"><div class="highlight"><pre>paint material ANY
</pre></div>
</div>
<p>Since different vein types have different drop rates, it is possible to choose
which one to use in painting:</p>
<div class="highlight-python"><div class="highlight"><pre>paint veintype CLUSTER_SMALL
</pre></div>
</div>
<p>When the chosen type is <code class="docutils literal"><span class="pre">CLUSTER</span></code> (the default), the tool may automatically
choose to use layer stone or lava stone instead of veins if its material matches
the desired one.</p>
<p>Any paint or filter option (or the entire paint or filter) can be disabled entirely by using the ANY keyword:</p>
<div class="highlight-python"><div class="highlight"><pre>paint hidden ANY
paint shape ANY
filter material any
filter shape any
filter any
</pre></div>
</div>
<p>You can use several different brushes for painting tiles:</p>
<ul class="simple">
<li>Point. (point)</li>
<li>Rectangular range. (range)</li>
<li>A column ranging from current cursor to the first solid tile above. (column)</li>
<li>DF map block - 16x16 tiles, in a regular grid. (block)</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>range 10 10 1
</pre></div>
</div>
<p>This will change the brush to a rectangle spanning 10x10 tiles on one z-level.
The range starts at the position of the cursor and goes to the east, south and
up.</p>
<p>For more details, use <code class="docutils literal"><span class="pre">tiletypes</span> <span class="pre">help</span></code>.</p>
<div class="section" id="tiletypes-command">
<h4><a class="toc-backref" href="#id91">tiletypes-command</a><a class="headerlink" href="#tiletypes-command" title="Permalink to this headline">¶</a></h4>
<p>Runs tiletypes commands, separated by ;. This makes it possible to change
tiletypes modes from a hotkey or via dfhack-run.</p>
</div>
<div class="section" id="tiletypes-here">
<h4><a class="toc-backref" href="#id92">tiletypes-here</a><a class="headerlink" href="#tiletypes-here" title="Permalink to this headline">¶</a></h4>
<p>Apply the current tiletypes options at the in-game cursor position, including
the brush. Can be used from a hotkey.</p>
</div>
<div class="section" id="tiletypes-here-point">
<h4><a class="toc-backref" href="#id93">tiletypes-here-point</a><a class="headerlink" href="#tiletypes-here-point" title="Permalink to this headline">¶</a></h4>
<p>Apply the current tiletypes options at the in-game cursor position to a single
tile. Can be used from a hotkey.</p>
</div>
</div>
<div class="section" id="tubefill">
<h3><a class="toc-backref" href="#id94">tubefill</a><a class="headerlink" href="#tubefill" title="Permalink to this headline">¶</a></h3>
<p>Fills all the adamantine veins again. Veins that were hollow will be left
alone.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hollow:</th><td class="field-body">fill in naturally hollow veins too</td>
</tr>
</tbody>
</table>
<p>Beware that filling in hollow veins will trigger a demon invasion on top of
your miner when you dig into the region that used to be hollow.</p>
</div>
<div class="section" id="plant">
<h3><a class="toc-backref" href="#id95">plant</a><a class="headerlink" href="#plant" title="Permalink to this headline">¶</a></h3>
<p>A tool for creating shrubs, growing, or getting rid of them.</p>
<p>Subcommands:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">create:</th><td class="field-body">Creates a new sapling under the cursor. Takes a raw ID as argument
(e.g. TOWER_CAP). The cursor must be located on a dirt or grass floor tile.</td>
</tr>
<tr class="field-even field"><th class="field-name">grow:</th><td class="field-body">Turns saplings into trees; under the cursor if a sapling is selected,
or every sapling on the map if the cursor is hidden.</td>
</tr>
<tr class="field-odd field"><th class="field-name">extirpate:</th><td class="field-body">Kills the tree or shrub under the cursor, instantly turning them to ashes.</td>
</tr>
<tr class="field-even field"><th class="field-name">immolate:</th><td class="field-body">Sets the plants on fire instead. The fires can and <em>will</em> spread ;)</td>
</tr>
</tbody>
</table>
<p>For mass effects, use one of the additional options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">shrubs:</th><td class="field-body">affect all shrubs on the map</td>
</tr>
<tr class="field-even field"><th class="field-name">trees:</th><td class="field-body">affect all trees on the map</td>
</tr>
<tr class="field-odd field"><th class="field-name">all:</th><td class="field-body">affect every plant!</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="regrass">
<h3><a class="toc-backref" href="#id96">regrass</a><a class="headerlink" href="#regrass" title="Permalink to this headline">¶</a></h3>
<p>Regrows all the grass. Not much to it ;)</p>
</div>
<div class="section" id="weather">
<h3><a class="toc-backref" href="#id97">weather</a><a class="headerlink" href="#weather" title="Permalink to this headline">¶</a></h3>
<p>Prints the current weather, and lets you change the weather to &#8216;clear&#8217;, &#8216;rain&#8217;
or &#8216;snow&#8217;, with those words as commands (eg <code class="docutils literal"><span class="pre">weather</span> <span class="pre">rain</span></code>).</p>
</div>
</div>
<div class="section" id="mods-and-cheating">
<h2><a class="toc-backref" href="#id98">Mods and Cheating</a><a class="headerlink" href="#mods-and-cheating" title="Permalink to this headline">¶</a></h2>
<div class="section" id="catsplosion">
<h3><a class="toc-backref" href="#id99">catsplosion</a><a class="headerlink" href="#catsplosion" title="Permalink to this headline">¶</a></h3>
<p>Makes cats just <em>multiply</em>. It is not a good idea to run this more than once or
twice.</p>
</div>
<div class="section" id="createitem">
<h3><a class="toc-backref" href="#id100">createitem</a><a class="headerlink" href="#createitem" title="Permalink to this headline">¶</a></h3>
<p>Allows creating new items of arbitrary types and made of arbitrary materials.
By default, items created are spawned at the feet of the selected unit.</p>
<p>Specify the item and material information as you would indicate them in custom reaction raws, with the following differences:</p>
<ul class="simple">
<li>Separate the item and material with a space rather than a colon</li>
<li>If the item has no subtype, omit the :NONE</li>
<li>If the item is REMAINS, FISH, FISH_RAW, VERMIN, PET, or EGG, specify a CREATURE:CASTE pair instead of a material token.</li>
</ul>
<p>Corpses, body parts, and prepared meals cannot be created using this tool.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre>createitem GLOVES:ITEM_GLOVES_GAUNTLETS INORGANIC:STEEL 2
        Create 2 pairs of steel gauntlets.
createitem WOOD PLANT_MAT:TOWER_CAP:WOOD
        Create tower-cap logs.
</pre></div>
</div>
<p>To change where new items are placed, first run the command with a destination type while an appropriate destination is selected.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">floor:</th><td class="field-body">Subsequent items will be placed on the floor beneath the selected unit&#8217;s feet.</td>
</tr>
<tr class="field-even field"><th class="field-name">item:</th><td class="field-body">Subsequent items will be stored inside the currently selected item.</td>
</tr>
<tr class="field-odd field"><th class="field-name">building:</th><td class="field-body">Subsequent items will become part of the currently selected building.
Good for loading traps; do not use with workshops (or deconstruct to use the item).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fastdwarf">
<h3><a class="toc-backref" href="#id101">fastdwarf</a><a class="headerlink" href="#fastdwarf" title="Permalink to this headline">¶</a></h3>
<p>Controls speedydwarf and teledwarf. Speedydwarf makes dwarves move quickly
and perform tasks quickly. Teledwarf makes dwarves move instantaneously,
but do jobs at the same speed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">fastdwarf 0:</th><td class="field-body">disables both (also <code class="docutils literal"><span class="pre">0</span> <span class="pre">0</span></code>)</td>
</tr>
<tr class="field-even field"><th class="field-name">fastdwarf 1:</th><td class="field-body">enables speedydwarf and disables teledwarf (also <code class="docutils literal"><span class="pre">1</span> <span class="pre">0</span></code>)</td>
</tr>
<tr class="field-odd field"><th class="field-name">fastdwarf 2:</th><td class="field-body">sets a native debug flag in the game memory that implements an
even more aggressive version of speedydwarf.</td>
</tr>
<tr class="field-even field"><th class="field-name">fastdwarf 0 1:</th><td class="field-body">disables speedydwarf and enables teledwarf</td>
</tr>
<tr class="field-odd field"><th class="field-name">fastdwarf 1 1:</th><td class="field-body">enables both</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="forceequip">
<span id="plugins-forceequip"></span><h3><a class="toc-backref" href="#id102">forceequip</a><a class="headerlink" href="#forceequip" title="Permalink to this headline">¶</a></h3>
<p>Forceequip moves local items into a unit&#8217;s inventory.  It is typically used to
equip specific clothing/armor items onto a dwarf, but can also be used to put
armor onto a war animal or to add unusual items (such as crowns) to any unit.</p>
<p>For more information run <code class="docutils literal"><span class="pre">forceequip</span> <span class="pre">help</span></code>.  See also <a class="reference internal" href="Scripts.html#scripts-modtools-equip-item"><span>modtools/equip-item</span></a>.</p>
</div>
<div class="section" id="lair">
<h3><a class="toc-backref" href="#id103">lair</a><a class="headerlink" href="#lair" title="Permalink to this headline">¶</a></h3>
<p>This command allows you to mark the map as a monster lair, preventing item
scatter on abandon. When invoked as <code class="docutils literal"><span class="pre">lair</span> <span class="pre">reset</span></code>, it does the opposite.</p>
<p>Unlike <a class="reference internal" href="#plugins-reveal"><span>reveal</span></a>, this command doesn&#8217;t save the information about tiles - you
won&#8217;t be able to restore state of real monster lairs using <code class="docutils literal"><span class="pre">lair</span> <span class="pre">reset</span></code>.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">lair:</th><td class="field-body">Mark the map as monster lair</td>
</tr>
<tr class="field-even field"><th class="field-name">lair reset:</th><td class="field-body">Mark the map as ordinary (not lair)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="misery">
<h3><a class="toc-backref" href="#id104">misery</a><a class="headerlink" href="#misery" title="Permalink to this headline">¶</a></h3>
<p>When enabled, every new negative dwarven thought will be multiplied by a factor (2 by default).</p>
<p>Usage:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">misery enable n:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">enable misery with optional magnitude n. If specified, n must be positive.</td>
</tr>
<tr class="field-even field"><th class="field-name">misery n:</th><td class="field-body">same as &#8220;misery enable n&#8221;</td>
</tr>
<tr class="field-odd field"><th class="field-name">misery enable:</th><td class="field-body">same as &#8220;misery enable 2&#8221;</td>
</tr>
<tr class="field-even field"><th class="field-name">misery disable:</th><td class="field-body">stop adding new negative thoughts. This will not remove existing
duplicated thoughts. Equivalent to &#8220;misery 1&#8221;</td>
</tr>
<tr class="field-odd field"><th class="field-name">misery clear:</th><td class="field-body">remove fake thoughts added in this session of DF. Saving makes them
permanent! Does not change factor.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mode">
<h3><a class="toc-backref" href="#id105">mode</a><a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h3>
<p>This command lets you see and change the game mode directly.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Only use <code class="docutils literal"><span class="pre">mode</span></code> after making a backup of your save!</p>
<p class="last">Not all combinations are good for every situation and most of them will
produce undesirable results. There are a few good ones though.</p>
</div>
<p>Examples:</p>
<blockquote>
<div><ul class="simple">
<li>You are in fort game mode, managing your fortress and paused.</li>
<li>You switch to the arena game mode, <em>assume control of a creature</em> and then</li>
<li>switch to adventure game mode(1).
You just lost a fortress and gained an adventurer.  Alternatively:</li>
<li>You are in fort game mode, managing your fortress and paused at the esc menu.</li>
<li>You switch to the adventure game mode, assume control of a creature, then save or retire.</li>
<li>You just created a returnable mountain home and gained an adventurer.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="strangemood">
<span id="plugins-strangemood"></span><h3><a class="toc-backref" href="#id106">strangemood</a><a class="headerlink" href="#strangemood" title="Permalink to this headline">¶</a></h3>
<p>Creates a strange mood job the same way the game itself normally does it.</p>
<p>Options:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">-force:</th><td class="field-body">Ignore normal strange mood preconditions (no recent mood, minimum
moodable population, artifact limit not reached).</td>
</tr>
<tr class="field-even field"><th class="field-name">-unit:</th><td class="field-body">Make the strange mood strike the selected unit instead of picking
one randomly. Unit eligibility is still enforced.</td>
</tr>
<tr class="field-odd field"><th class="field-name">-type &lt;T&gt;:</th><td class="field-body">Force the mood to be of a particular type instead of choosing randomly based on happiness.
Valid values for Tare &#8220;fey&#8221;, &#8220;secretive&#8221;, &#8220;possessed&#8221;, &#8220;fell&#8221;, and &#8220;macabre&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">-skill S:</th><td class="field-body">Force the mood to use a specific skill instead of choosing the highest moodable skill.
Valid values are &#8220;miner&#8221;, &#8220;carpenter&#8221;, &#8220;engraver&#8221;, &#8220;mason&#8221;, &#8220;tanner&#8221;, &#8220;weaver&#8221;,
&#8220;clothier&#8221;, &#8220;weaponsmith&#8221;,  &#8220;armorsmith&#8221;, &#8220;metalsmith&#8221;, &#8220;gemcutter&#8221;, &#8220;gemsetter&#8221;,
&#8220;woodcrafter&#8221;, &#8220;stonecrafter&#8221;, &#8220;metalcrafter&#8221;, &#8220;glassmaker&#8221;, &#8220;leatherworker&#8221;,
&#8220;bonecarver&#8221;, &#8220;bowyer&#8221;, and &#8220;mechanic&#8221;.</td>
</tr>
</tbody>
</table>
<p>Known limitations: if the selected unit is currently performing a job, the mood will not be started.</p>
</div>
<div class="section" id="behavior-mods">
<h3><a class="toc-backref" href="#id107">Behavior Mods</a><a class="headerlink" href="#behavior-mods" title="Permalink to this headline">¶</a></h3>
<p>These plugins, when activated via configuration UI or by detecting certain
structures in RAWs, modify the game engine behavior concerning the target
objects to add features not otherwise present.</p>
<div class="section" id="siege-engine">
<span id="plugins-siege-engine"></span><h4><a class="toc-backref" href="#id108">Siege Engine</a><a class="headerlink" href="#siege-engine" title="Permalink to this headline">¶</a></h4>
<p>Siege engines are a very interesting feature, but sadly almost useless in the current state
because they haven&#8217;t been updated since 2D and can only aim in four directions. This is an
attempt to bring them more up to date until Toady has time to work on it. Actual improvements,
e.g. like making siegers bring their own, are something only Toady can do.</p>
<p>The siege-engine plugin enables siege engines to be linked to stockpiles, and
aimed at an arbitrary rectangular area across Z levels, instead of the original
four directions. Also, catapults can be ordered to load arbitrary objects, not
just stones.</p>
<div class="section" id="configuration-ui">
<h5>Configuration UI<a class="headerlink" href="#configuration-ui" title="Permalink to this headline">¶</a></h5>
<p>The configuration front-end to the plugin is implemented by <a class="reference internal" href="Scripts.html#scripts-gui-siege-engine"><span>gui/siege-engine</span></a>.
Bind it to a key (the example config uses Alt-A) and activate after selecting
a siege engine in <code class="docutils literal"><span class="pre">q</span></code> mode.</p>
<img alt="../_images/siege-engine.png" src="../_images/siege-engine.png" />
<p>The main mode displays the current target, selected ammo item type, linked stockpiles and
the allowed operator skill range. The map tile color is changed to signify if it can be
hit by the selected engine: green for fully reachable, blue for out of range, red for blocked,
yellow for partially blocked.</p>
<p>Pressing <code class="docutils literal"><span class="pre">r</span></code> changes into the target selection mode, which works by highlighting two points
with Enter like all designations. When a target area is set, the engine projectiles are
aimed at that area, or units within it (this doesn&#8217;t actually change the original aiming
code, instead the projectile trajectory parameters are rewritten as soon as it appears).</p>
<p>After setting the target in this way for one engine, you can &#8216;paste&#8217; the same area into others
just by pressing <code class="docutils literal"><span class="pre">p</span></code> in the main page of this script. The area to paste is kept until you quit
DF, or select another area manually.</p>
<p>Pressing <code class="docutils literal"><span class="pre">t</span></code> switches to a mode for selecting a stockpile to take ammo from.</p>
<p>Exiting from the siege engine script via ESC reverts the view to the state prior to starting
the script. Shift-ESC retains the current viewport, and also exits from the <code class="docutils literal"><span class="pre">q</span></code> mode to main
menu.</p>
</div>
</div>
<div class="section" id="power-meter">
<span id="plugins-power-meter"></span><h4><a class="toc-backref" href="#id109">Power Meter</a><a class="headerlink" href="#power-meter" title="Permalink to this headline">¶</a></h4>
<p>The power-meter plugin implements a modified pressure plate that detects power being
supplied to gear boxes built in the four adjacent N/S/W/E tiles.</p>
<p>The configuration front-end is implemented by <a class="reference internal" href="Scripts.html#scripts-gui-power-meter"><span>gui/power-meter</span></a>. Bind it to a
key (the example config uses Ctrl-Shift-M) and activate after selecting Pressure Plate
in the build menu.</p>
<img alt="../_images/power-meter.png" src="../_images/power-meter.png" />
<p>The script follows the general look and feel of the regular pressure plate build
configuration page, but configures parameters relevant to the modded power meter building.</p>
</div>
<div class="section" id="steam-engine">
<h4><a class="toc-backref" href="#id110">Steam Engine</a><a class="headerlink" href="#steam-engine" title="Permalink to this headline">¶</a></h4>
<p>The steam-engine plugin detects custom workshops with STEAM_ENGINE in
their token, and turns them into real steam engines.</p>
<p>The vanilla game contains only water wheels and windmills as sources of
power, but windmills give relatively little power, and water wheels require
flowing water, which must either be a real river and thus immovable and
limited in supply, or actually flowing and thus laggy.</p>
<p>Steam engines are an alternative to water reactors that actually makes
sense, and hopefully doesn&#8217;t lag. Also, unlike e.g. animal treadmills,
it can be done just by combining existing features of the game engine
in a new way with some glue code and a bit of custom logic.</p>
<div class="section" id="construction">
<h5>Construction<a class="headerlink" href="#construction" title="Permalink to this headline">¶</a></h5>
<p>The workshop needs water as its input, which it takes via a
passable floor tile below it, like usual magma workshops do.
The magma version also needs magma.</p>
<div class="admonition-issue admonition">
<p class="first admonition-title">ISSUE</p>
<p class="last">Since this building is a machine, and machine collapse
code cannot be hooked, it would collapse over true open space.
As a loophole, down stair provides support to machines, while
being passable, so use them.</p>
</div>
<p>After constructing the building itself, machines can be connected
to the edge tiles that look like gear boxes. Their exact position
is extracted from the workshop raws.</p>
<div class="admonition-issue admonition">
<p class="first admonition-title">ISSUE</p>
<p class="last">Like with collapse above, part of the code involved in
machine connection cannot be hooked. As a result, the workshop
can only immediately connect to machine components built AFTER it.
This also means that engines cannot be chained without intermediate
short axles that can be built later than both of the engines.</p>
</div>
</div>
<div class="section" id="operation">
<h5>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">¶</a></h5>
<p>In order to operate the engine, queue the Stoke Boiler job (optionally
on repeat). A furnace operator will come, possibly bringing a bar of fuel,
and perform it. As a result, a &#8220;boiling water&#8221; item will appear
in the &#8216;t&#8217; view of the workshop.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The completion of the job will actually consume one unit
of the appropriate liquids from below the workshop. This means
that you cannot just raise 7 units of magma with a piston and
have infinite power. However, liquid consumption should be slow
enough that water can be supplied by a pond zone bucket chain.</p>
</div>
<p>Every such item gives 100 power, up to a limit of 300 for coal,
and 500 for a magma engine. The building can host twice that
amount of items to provide longer autonomous running. When the
boiler gets filled to capacity, all queued jobs are suspended;
once it drops back to 3+1 or 5+1 items, they are re-enabled.</p>
<p>While the engine is providing power, steam is being consumed.
The consumption speed includes a fixed 10% waste rate, and
the remaining 90% are applied proportionally to the actual
load in the machine. With the engine at nominal 300 power with
150 load in the system, it will consume steam for actual
300*(10% + 90%*150/300) = 165 power.</p>
<p>Masterpiece mechanism and chain will decrease the mechanical
power drawn by the engine itself from 10 to 5. Masterpiece
barrel decreases waste rate by 4%. Masterpiece piston and pipe
decrease it by further 4%, and also decrease the whole steam
use rate by 10%.</p>
</div>
<div class="section" id="explosions">
<h5>Explosions<a class="headerlink" href="#explosions" title="Permalink to this headline">¶</a></h5>
<p>The engine must be constructed using barrel, pipe and piston
from fire-safe, or in the magma version magma-safe metals.</p>
<p>During operation weak parts get gradually worn out, and
eventually the engine explodes. It should also explode if
toppled during operation by a building destroyer, or a
tantruming dwarf.</p>
</div>
<div class="section" id="save-files">
<h5>Save files<a class="headerlink" href="#save-files" title="Permalink to this headline">¶</a></h5>
<p>It should be safe to load and view engine-using fortresses
from a DF version without DFHack installed, except that in such
case the engines won&#8217;t work. However actually making modifications
to them, or machines they connect to (including by pulling levers),
can easily result in inconsistent state once this plugin is
available again. The effects may be as weird as negative power
being generated.</p>
</div>
</div>
<div class="section" id="add-spatter">
<h4><a class="toc-backref" href="#id111">add-spatter</a><a class="headerlink" href="#add-spatter" title="Permalink to this headline">¶</a></h4>
<p>This plugin makes reactions with names starting with <code class="docutils literal"><span class="pre">SPATTER_ADD_</span></code>
produce contaminants on the items instead of improvements. The produced
contaminants are immune to being washed away by water or destroyed by
the <a class="reference internal" href="#plugins-clean"><span>clean</span></a> <code class="docutils literal"><span class="pre">items</span></code> command.</p>
<p>The plugin is intended to give some use to all those poisons that can
be bought from caravans. :)</p>
<p>To be really useful this needs patches from bug 808, <a class="reference internal" href="#plugins-tweak"><span>tweak</span></a>
<code class="docutils literal"><span class="pre">fix-dimensions</span></code> and <a class="reference internal" href="#plugins-tweak"><span>tweak</span></a> <code class="docutils literal"><span class="pre">advmode-contained</span></code>.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../README.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DFHack Plugins</a><ul>
<li><a class="reference internal" href="#informative-plugins">Informative Plugins</a><ul>
<li><a class="reference internal" href="#visualizer-and-data-export">Visualizer and data export</a><ul>
<li><a class="reference internal" href="#stonesense">stonesense</a></li>
<li><a class="reference internal" href="#mapexport">mapexport</a></li>
<li><a class="reference internal" href="#dwarfexport">dwarfexport</a></li>
<li><a class="reference internal" href="#blueprint">blueprint</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-inspection">Map inspection</a><ul>
<li><a class="reference internal" href="#cursecheck">cursecheck</a></li>
<li><a class="reference internal" href="#flows">flows</a></li>
<li><a class="reference internal" href="#probe">probe</a></li>
<li><a class="reference internal" href="#prospect">prospect</a></li>
<li><a class="reference internal" href="#reveal">reveal</a><ul>
<li><a class="reference internal" href="#unreveal">unreveal</a></li>
<li><a class="reference internal" href="#revtoggle">revtoggle</a></li>
<li><a class="reference internal" href="#revflood">revflood</a></li>
<li><a class="reference internal" href="#revforget">revforget</a></li>
</ul>
</li>
<li><a class="reference internal" href="#showmood">showmood</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#bugfixes">Bugfixes</a><ul>
<li><a class="reference internal" href="#drybuckets">drybuckets</a></li>
<li><a class="reference internal" href="#fixdiplomats">fixdiplomats</a></li>
<li><a class="reference internal" href="#fixmerchants">fixmerchants</a></li>
<li><a class="reference internal" href="#fix-unit-occupancy">fix-unit-occupancy</a></li>
<li><a class="reference internal" href="#fixveins">fixveins</a></li>
<li><a class="reference internal" href="#petcapremover">petcapRemover</a></li>
<li><a class="reference internal" href="#tweak">tweak</a></li>
<li><a class="reference internal" href="#fix-armory">fix-armory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ui-upgrades">UI Upgrades</a><ul>
<li><a class="reference internal" href="#manipulator">manipulator</a></li>
<li><a class="reference internal" href="#search">search</a></li>
<li><a class="reference internal" href="#game-interface">Game interface</a><ul>
<li><a class="reference internal" href="#embark-tools">embark-tools</a></li>
<li><a class="reference internal" href="#automaterial">automaterial</a></li>
<li><a class="reference internal" href="#buildingplan">buildingplan</a></li>
<li><a class="reference internal" href="#confirm">confirm</a></li>
<li><a class="reference internal" href="#follow">follow</a></li>
<li><a class="reference internal" href="#mousequery">mousequery</a></li>
<li><a class="reference internal" href="#resume">resume</a></li>
<li><a class="reference internal" href="#tidlers">tidlers</a></li>
<li><a class="reference internal" href="#trackstop">trackstop</a></li>
<li><a class="reference internal" href="#twaterlvl">twaterlvl</a></li>
<li><a class="reference internal" href="#stockpile-management">stockpile management</a><ul>
<li><a class="reference internal" href="#import-export">import/export</a></li>
<li><a class="reference internal" href="#stockpile-automation">Stockpile automation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rename">rename</a></li>
<li><a class="reference internal" href="#rendermax">rendermax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#designations">Designations</a><ul>
<li><a class="reference internal" href="#burrow">burrow</a></li>
<li><a class="reference internal" href="#dig">dig</a><ul>
<li><a class="reference internal" href="#digv">digv</a></li>
<li><a class="reference internal" href="#digvx">digvx</a></li>
<li><a class="reference internal" href="#digl">digl</a></li>
<li><a class="reference internal" href="#diglx">diglx</a></li>
<li><a class="reference internal" href="#digexp">digexp</a></li>
<li><a class="reference internal" href="#digcircle">digcircle</a></li>
<li><a class="reference internal" href="#digtype">digtype</a></li>
</ul>
</li>
<li><a class="reference internal" href="#digflood">digFlood</a></li>
<li><a class="reference internal" href="#filltraffic">filltraffic</a></li>
<li><a class="reference internal" href="#alltraffic">alltraffic</a></li>
<li><a class="reference internal" href="#restrictliquid">restrictliquid</a></li>
<li><a class="reference internal" href="#restrictice">restrictice</a></li>
<li><a class="reference internal" href="#getplants">getplants</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#job-and-fortress-management">Job and Fortress management</a><ul>
<li><a class="reference internal" href="#autolabor">autolabor</a><ul>
<li><a class="reference internal" href="#autohauler">autohauler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#job-management">Job management</a><ul>
<li><a class="reference internal" href="#job">job</a></li>
<li><a class="reference internal" href="#job-material">job-material</a></li>
<li><a class="reference internal" href="#job-duplicate">job-duplicate</a></li>
<li><a class="reference internal" href="#stockflow">stockflow</a></li>
<li><a class="reference internal" href="#workflow">workflow</a><ul>
<li><a class="reference internal" href="#function">Function</a></li>
<li><a class="reference internal" href="#constraint-format">Constraint format</a></li>
<li><a class="reference internal" href="#constraint-examples">Constraint examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cleanup-and-garbage-disposal">Cleanup and garbage disposal</a><ul>
<li><a class="reference internal" href="#clean">clean</a></li>
<li><a class="reference internal" href="#spotclean">spotclean</a></li>
<li><a class="reference internal" href="#autodump">autodump</a><ul>
<li><a class="reference internal" href="#autodump-destroy-item">autodump-destroy-item</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cleanowned">cleanowned</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fortress-activity-management">Fortress activity management</a><ul>
<li><a class="reference internal" href="#dwarfmonitor">dwarfmonitor</a></li>
<li><a class="reference internal" href="#worknow">workNow</a></li>
<li><a class="reference internal" href="#seedwatch">seedwatch</a></li>
<li><a class="reference internal" href="#zone">zone</a><ul>
<li><a class="reference internal" href="#usage-with-single-units">Usage with single units</a></li>
<li><a class="reference internal" href="#usage-with-filters">Usage with filters</a></li>
<li><a class="reference internal" href="#mass-renaming">Mass-renaming</a></li>
<li><a class="reference internal" href="#cage-zones">Cage zones</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#autonestbox">autonestbox</a></li>
<li><a class="reference internal" href="#autobutcher">autobutcher</a></li>
<li><a class="reference internal" href="#autochop">autochop</a></li>
<li><a class="reference internal" href="#treefarm">treefarm</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#adventure-mode">Adventure mode</a><ul>
<li><a class="reference internal" href="#adv-bodyswap">adv-bodyswap</a></li>
<li><a class="reference internal" href="#advtools">advtools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#map-modification">Map modification</a><ul>
<li><a class="reference internal" href="#dveins">3dveins</a></li>
<li><a class="reference internal" href="#changelayer">changelayer</a></li>
<li><a class="reference internal" href="#changevein">changevein</a></li>
<li><a class="reference internal" href="#changeitem">changeitem</a></li>
<li><a class="reference internal" href="#cleanconst">cleanconst</a></li>
<li><a class="reference internal" href="#colonies">colonies</a></li>
<li><a class="reference internal" href="#deramp">deramp</a></li>
<li><a class="reference internal" href="#feature">feature</a></li>
<li><a class="reference internal" href="#fortplan">fortplan</a></li>
<li><a class="reference internal" href="#infinitesky">infiniteSky</a></li>
<li><a class="reference internal" href="#liquids">liquids</a><ul>
<li><a class="reference internal" href="#commands">Commands</a></li>
<li><a class="reference internal" href="#liquids-here">liquids-here</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tiletypes">tiletypes</a><ul>
<li><a class="reference internal" href="#tiletypes-command">tiletypes-command</a></li>
<li><a class="reference internal" href="#tiletypes-here">tiletypes-here</a></li>
<li><a class="reference internal" href="#tiletypes-here-point">tiletypes-here-point</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tubefill">tubefill</a></li>
<li><a class="reference internal" href="#plant">plant</a></li>
<li><a class="reference internal" href="#regrass">regrass</a></li>
<li><a class="reference internal" href="#weather">weather</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mods-and-cheating">Mods and Cheating</a><ul>
<li><a class="reference internal" href="#catsplosion">catsplosion</a></li>
<li><a class="reference internal" href="#createitem">createitem</a></li>
<li><a class="reference internal" href="#fastdwarf">fastdwarf</a></li>
<li><a class="reference internal" href="#forceequip">forceequip</a></li>
<li><a class="reference internal" href="#lair">lair</a></li>
<li><a class="reference internal" href="#misery">misery</a></li>
<li><a class="reference internal" href="#mode">mode</a></li>
<li><a class="reference internal" href="#strangemood">strangemood</a></li>
<li><a class="reference internal" href="#behavior-mods">Behavior Mods</a><ul>
<li><a class="reference internal" href="#siege-engine">Siege Engine</a><ul>
<li><a class="reference internal" href="#configuration-ui">Configuration UI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#power-meter">Power Meter</a></li>
<li><a class="reference internal" href="#steam-engine">Steam Engine</a><ul>
<li><a class="reference internal" href="#construction">Construction</a></li>
<li><a class="reference internal" href="#operation">Operation</a></li>
<li><a class="reference internal" href="#explosions">Explosions</a></li>
<li><a class="reference internal" href="#save-files">Save files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-spatter">add-spatter</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../README.html">Documentation overview</a><ul>
      <li>Previous: <a href="Core.html" title="previous chapter">DFHack Core</a></li>
      <li>Next: <a href="Scripts.html" title="next chapter">DFHack Scripts</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/docs/Plugins.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, The DFHack Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/docs/Plugins.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>